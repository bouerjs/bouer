/*!
 * Bouer.js v3.0.0
 * Copyright Easy.js 2018-2020 | 2021-2022 Afonso Matumona
 * Released under the MIT License.
 */
var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};function t(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}var n=function(){function e(){}return e.log=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];t.unshift(e.prefix),console.log.apply(null,t)},e.error=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];t.unshift(e.prefix),console.error.apply(null,t)},e.warn=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];t.unshift(e.prefix),console.warn.apply(null,t)},e.info=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];t.unshift(e.prefix),console.info.apply(null,t)},e.prefix="[Bouer]",e}(),r=function(){function e(){}return e.set=function(e,t,n){return Object.defineProperty(e,t,n),e},e.descriptor=function(e,t){return Object.getOwnPropertyDescriptor(e,t)},e.transfer=function(t,n,r){var o=e.descriptor(n,r);r in t||(t[r]=void 0),e.set(t,r,o)},e}();function o(e,t){if(!e)return Promise.reject(new Error("Invalid Url"));var n=function(e,n){var r=(t||{})[e];return r||n},r=n("headers",{}),o=n("method","get"),i=n("body",void 0),a=function(e){if(!(!V.documentMode||e.match(/^(get|post)$/i)&&T.XMLHttpRequest))return new T.ActiveXObject("Microsoft.XMLHTTP");if(T.XMLHttpRequest)return new T.XMLHttpRequest;throw new Error("This browser does not support XMLHttpRequest.")}(o);return new Promise((function(t,n){var s=function(t,n,r,o,i){t({url:e,ok:n,status:r,statusText:o.statusText||"",headers:o.getAllResponseHeaders(),json:function(){return Promise.resolve(JSON.stringify(i))},text:function(){return Promise.resolve(i)}})};a.open(o,e,!0),y(Object.keys(r),(function(e){a.setRequestHeader(e,r[e])})),a.onload=function(){var n="response"in a?a.response:a.responseText,r=1223===a.status?204:a.status;0===r&&(r=n?200:"file"===E(e).protocol?404:0),s(t,r>=200&&r<400,r,a,n)},a.onerror=function(){s(n,!1,a.status,a,"")},a.onabort=function(){s(n,!1,a.status,a,"")},a.ontimeout=function(){s(n,!1,a.status,a,"")},a.send(i)}))}function i(e,t,n){for(var r="01234567890ABCDEFGHIJKLMNOPQRSTUVWXYZ",o="",i=!1,a=0;a<(e||8);a++){var s=Math.floor(Math.random()*r.length);o+=i?v(r[s]):r[s],i=!i}return(t||"")+o+(n||"")}function a(e){return void 0===e||null==e}function s(e){return"object"==typeof e&&"[object Object]"===String(e)}function u(e){return void 0!==e&&"string"==typeof e}function c(e){return!e||!s(e)||0===Object.keys(e).length}function l(e){return"function"==typeof e}function d(e,t){return a(e)?t:e}function f(e){if(a(e))throw new Error("Application is not initialized");return e}function p(e){return e?e.trim():e}function h(e,t){return e.substring(0,t.length)===t}function v(e){return e.toLowerCase()}function m(e){return function(e){return"string"==typeof e||"number"==typeof e||"symbol"==typeof e||"boolean"==typeof e}(e)?String(e):s(e)||Array.isArray(e)?JSON.stringify(e):l(e.toString)?e.toString():String(e)}function b(e,t,n){void 0===n&&(n=!1);var r=null;if(!e)return null;for(var o=0,i=t;o<i.length;o++){var s=i[o];if(r=e.attributes[s])break}return!a(r)&&n&&e.removeAttribute(r.name),r}function y(e,t,n){for(var r=0;r<e.length;r++)l(t)&&t.call(n,e[r],r)}function g(e,t,n){for(var r=[],o=0;o<e.length;o++){var i=e[o];l(t)&&t.call(n,i,o)&&r.push(i)}return r}function x(e){return e?[].slice.call(e):[]}function N(e,t){var n=V.createComment(t||" e ");return n.id=e||i(8),n}function w(e,t){return C(e,t)}function C(e,t){var n=V.createElement(e);l(t)&&t(n,V);var r={appendTo:function(e){return e.appendChild(n),r},build:function(){return n},child:function(){return n.children[0]}};return r}function k(e){var t=e.parentNode;t&&t.removeChild(e)}function A(e,t){y(Object.keys(e),(function(n){var o=e[n];if(n in t)return s(o)?A(o,t[n]):t[n]=o;r.transfer(t,e,n)}))}function E(e){var t=e;"documentMode"in V&&(D.setAttribute("href",t),t=D.href),D.href=t;var n=D.hostname;!("[::1]"===D.hostname)&&n.indexOf(":")>-1&&(n="["+n+"]");var r={href:D.href,baseURI:D.baseURI,protocol:D.protocol?D.protocol.replace(/:$/,""):"",host:D.host,search:D.search?D.search.replace(/^\?/,""):"",hash:D.hash?D.hash.replace(/^#/,""):"",hostname:n,port:D.port,pathname:"/"===D.pathname.charAt(0)?D.pathname:"/"+D.pathname,origin:""};return r.origin=r.protocol+"://"+r.host,r}function O(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=e.split(/\/\//),o=r.length>1?r[0]+"//":"",i=""===o?r[0]:r[1],a=i.split(/\//),s=[];return y(a,(function(e){return p(e)?s.push(e):null})),y(t,(function(e){return y(e.split(/\//),(function(e){return p(e)?s.push(e):null}))})),o+s.join("/")}function I(e,t){var n=function(e){return"../"===e.substring(0,3)},r=function(e){var t=e.split("/");return/\.html$|\.css$|\.js$/gi.test(e)&&t.pop(),{relative:t.join("/"),parts:t}};if("./"===t.substring(0,2))return r(e).relative+t.substring(1);if(!n(t))return t;var o=r(e).parts;return o.push(function e(t){return n(t)?(o.pop(),e(t.substring(3))):t}(t)),o.join("/")}function P(e){return e?(e.stack="",e):"Unknown Error"}function j(e){return e instanceof Promise&&e.then((function(e){l(e)?e.call():e instanceof Promise&&e.then()})).catch((function(e){return n.error(e)})),e}var T=window,V=document,D=C("a").build(),_={skip:"e-skip",build:"e-build",array:"e-array",if:"e-if",elseif:"e-else-if",else:"e-else",show:"e-show",req:"e-req",for:"e-for",data:"data",def:"e-def",wait:"wait-data",text:"e-text",bind:"e-bind",property:"e-",skeleton:"e-skeleton",route:"route-view",href:":href",entry:"e-entry",on:"on:",silent:"--s",slot:"slot",ref:"ref",put:"e-put",builtInEvents:{add:"add",compile:"compile",request:"request",response:"response",fail:"fail",done:"done"},check:function(e,t){return h(e.nodeName,t)},isConstant:function(e){var t=this;return-1!==Object.keys(this).map((function(e){return t[e]})).indexOf(e)}},L=function(){function e(){}return e.obj=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n={};return y(e,(function(e){a(e)||y(Object.keys(e),(function(t){r.transfer(n,e,t)}))})),n},e.mixin=function(t){for(var n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];var i=e.obj.apply(this,n);return y(Object.keys(i),(function(e){var n=e in t;if(r.transfer(t,i,e),n){var o=t;o[e]=o[e]}})),t},e.array=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=[];return y(e,(function(e){if(!a(e))return Array.isArray(e)?void y(Object.keys(e),(function(t){var r=e[t];a(r)||(Array.isArray(r)?[].push.apply(n,r):n.push(r))})):n.push(e)})),n},e}(),S=function(){function e(e){this.app=e}return e.prototype.add=function(t,n){e.add(t,n)},e.prototype.get=function(t){return e.get(this.app,t)},e.prototype.clear=function(){return e.clear(this.app)},e.add=function(t,n){var r,o,i=n.bouer;if(!(o=e.serviceCollection.get(i)))return e.serviceCollection.set(i,((r={})[t]=n,r));o[t]=n},e.get=function(t,n){if(t.isDestroyed)throw new Error("Application already disposed.");var r=e.serviceCollection.get(t);if(!r)throw new Error("Application not registered!");return r[n]},e.clear=function(t){return e.serviceCollection.delete(t)},e.genId=function(){return e.bouerId++},e.bouerId=1,e.serviceCollection=new Map,e}(),H=function(){function e(){}return e.run=function(e,t){var n=setInterval((function(){e((function(){return clearInterval(n)}))}),t||10)},e}(),q=function(){this._IRT_=!0},M=function(){function e(){}return e.on=function(t,n){return a(this.events[t])&&(this.events[t]=[]),this.events[t].push(n),{eventName:t,callback:n,off:function(){return e.off(t,n)}}},e.off=function(e,t){var n=this.events[e]||[];return n.splice(n.indexOf(t),1),!0},e.once=function(t,r){var o={},i=e.on(t,(function(e){o.onemit&&o.onemit(e)}));try{r(o)}catch(e){n.error(P(e))}finally{e.off(t,i.callback)}},e.emit=function(e,t){try{y(this.events[e]||[],(function(e){return e(t)}))}catch(e){n.error(P(e))}},e.events={},e}(),R=function(e){function r(t){var n=e.call(this)||this;return n.binds=[],n.DEFAULT_BINDER_PROPERTIES={text:"value",number:"valueAsNumber",checkbox:"checked",radio:"value"},n.BindingDirection={fromInputToData:"fromInputToData",fromDataToInput:"fromDataToInput"},n.bouer=t,n.serviceProvider=new S(t),n.evaluator=n.serviceProvider.get("Evaluator"),n.serviceProvider.add("Binder",n),n.cleanup(),n}return t(r,e),r.prototype.create=function(e){var t=this,r=e.node,o=e.data,i=e.fields,u=e.isReplaceProperty,c=e.context,l=p(d(r.nodeValue,"")),f=r.nodeName,h=r.ownerElement||r.parentNode,v=this.serviceProvider.get("Middleware"),g=e.onUpdate||function(e,t){},N={node:r,data:o,nodeName:f,nodeValue:l,fields:i,parent:h,value:""},w=function(e){v.run(f,{type:e,action:function(e){e({binder:N,detail:{}},{success:function(){},fail:function(){},done:function(){}})}})};return f.substring(0,_.bind.length)===_.bind?function(){var i="",u=h.type||h.localName;i=_.bind===f?t.DEFAULT_BINDER_PROPERTIES[u]||"value":f.split(":")[1];var d,v,C=h instanceof HTMLSelectElement,k=C&&!0===h.multiple,A=b(h,[":value"],!0),E=A?A.value:"'"+h.value+"'",O=p(l),I={fromDataToInput:function(e){if(!Array.isArray(d))return"radio"===u?h.checked=h[i]==e:h[i]=s(e)?m(e):a(e)?"":e;if(v=v||t.evaluator.exec({data:o,code:E,context:c}),k)return y(x(h.options),(function(e){e.selected=-1!==d.indexOf(p(e.value))}));if(-1===d.indexOf(v))switch(typeof h[i]){case"boolean":h[i]=!1;break;case"number":h[i]=0;break;default:h[i]=""}},fromInputToData:function(e){if(!Array.isArray(d))return t.evaluator.exec({isReturn:!1,context:c,data:L.obj(o,{$vl:e}),code:O+"=$vl"});if(v=v||t.evaluator.exec({data:o,code:E,context:c}),k){var n=[];return y(x(h.options),(function(e){!0===e.selected&&n.push(p(e.value))})),d.splice(0,d.length),d.push.apply(d,n)}e?d.push(v):d.splice(d.indexOf(v),1)}},P=function(e,t){return C&&!k&&Array.isArray(d)&&!E?n.error("Since it's a <select> array binding, it expects the \u201cmultiple\u201d attribute in order to bind the multiple values."):k||!Array.isArray(d)||E?I[e](t):n.error('Since it\'s an array binding it expects a model but it has not been defined, provide a model as it follows: value="String-Model" or :value="Object-Model".')};M.once("AfterGet",(function(n){var i=function(){return t.evaluator.exec({data:o,code:O,context:c})};n.onemit=function(n){t.binds.push({isConnected:e.isConnected,watch:n.onChange((function(){w("onUpdate");var e=i();P(t.BindingDirection.fromDataToInput,e),g(e,r)}),r)})},d=i()})),w("onBind"),P(t.BindingDirection.fromDataToInput,d);var j=["input","propertychange","change"];return-1===j.indexOf(h.localName)&&j.push(h.localName),y(j,(function(e){"change"===e&&"select"!==h.localName||h.addEventListener(e,(function(){P(t.BindingDirection.fromInputToData,h[i])}),!1)})),h.removeAttribute(r.nodeName),N}():function(){var n=r;f.substring(0,_.property.length)===_.property&&a(u)&&(N.nodeName=f.substring(_.property.length),h.setAttribute(N.nodeName,l),n=h.attributes[N.nodeName],h.removeAttribute(r.nodeName));var s=function(){var e=N.nodeValue,s=!1;if(y(i,(function(n){var i=n.delimiter;i&&"html"===i.name&&(s=!0);var u=t.evaluator.exec({data:o,code:n.expression,context:c});u=a(u)?"":u,e=e.replace(n.field,m(u)),i&&"function"==typeof i.onUpdate&&(e=i.onUpdate(e,r,o))})),N.value=e,!s)return n.nodeValue=e;var u=C("div",(function(t){return t.innerHTML=e})).child();h.appendChild(u),t.serviceProvider.get("Compiler").compile({el:u,data:o,context:c})};return M.once("AfterGet",(function(n){n.onemit=function(n){t.binds.push({isConnected:e.isConnected,watch:n.onChange((function(){w("onUpdate"),s(),g(n.propValue,r)}),r)})},s()})),w("onBind"),N.node=n,N}()},r.prototype.remove=function(e,t,n){this.binds=g(this.binds,(function(r){var o=r.watch.node;return(o.ownerElement||o.parentElement)!==e||(a(t)?r.watch.destroy():o.nodeName!==t||n!==r.watch.property&&!a(n)||r.watch.destroy())}))},r.prototype.onPropertyChange=function(e,t,n){var r;return M.once("AfterGet",(function(o){o.onemit=function(e){return r=e.onChange(t)},n[e]})),r},r.prototype.onPropertyInScopeChange=function(e){var t=this,n=[];return M.once("AfterGet",(function(r){r.onemit=function(r){if(!n.find((function(e){return e.property===r.propName&&e.reactive.propSource===r.propSource}))){var o=!1;n.push(r.onChange((function(){o||(o=!0,e.call(t.bouer,t.bouer),o=!1)})))}},e.call(t.bouer,t.bouer)})),{watches:n,destroy:function(){return y(n,(function(e){return e.destroy()}))}}},r.prototype.cleanup=function(){var e=this;0!=d(this.bouer.config.autoUnbind,!0)&&H.run((function(){e.binds=g(e.binds,(function(e){if(e.isConnected())return!0;e.watch.destroy()}))}))},r}(q),$=function(e){function n(t,n,r){var o=e.call(this)||this;return o.destroy=function(){var e=o.reactive.watches.indexOf(o);-1!==e&&o.reactive.watches.splice(e,1),o.onDestroy&&o.onDestroy()},o.reactive=t,o.property=t.propName,o.callback=n,r&&(o.node=r.node,o.onDestroy=r.onDestroy),o}return t(n,e),n}(q),U=function(e){function o(t){var i=e.call(this)||this;return i.watches=[],i.computed=function(){if(!i.isComputed)return{get:function(){},set:function(e){}};var e=i.fnComputed.call(i.context);if(a(e))throw new Error("Invalid value used as return in \u201cfunction $computed(){...}\u201d.");var t=s(e)||l(e);return{get:t&&"get"in e?e.get:function(){return e},set:t&&"set"in e?e.set:void 0}},i.get=function(){var e=i.computed().get;M.emit("BeforeGet",i),i.propValue=i.isComputed?j(e.call(i.context)):i.propValue;var t=i.propValue;return M.emit("AfterGet",i),t},i.set=function(e){if(!(i.propValue===e||Number.isNaN(i.propValue)&&Number.isNaN(e))){var t=i.computed().set;if(i.isComputed&&t)j(t.call(i.context,e));else if(i.isComputed&&a(t))return;if(i.propValueOld=i.propValue,M.emit("BeforeSet",i),s(e)||Array.isArray(e)){if(typeof i.propValue!=typeof e)return n.error("Cannot set \u201c"+typeof e+"\u201d in \u201c"+i.propName+"\u201d property.");if(Array.isArray(e)){o.transform({data:e,reactiveObj:i,context:i.context});var r=i.propValue;r.splice(0,r.length),r.push.apply(r,e)}else s(e)&&(e instanceof Node?i.propValue=e:(o.transform({data:e,context:i.context}),a(i.propValue)?i.propValue=e:A(e,i.propValue)))}else i.propValue=e;M.emit("AfterSet",i),i.notify()}},i.propName=t.propName,i.propSource=t.srcObject,i.context=t.context,i.propDescriptor=r.descriptor(i.propSource,i.propName),i.propValue=i.propDescriptor.value,i.isComputed="function"==typeof i.propValue&&"$computed"===i.propValue.name,i.isComputed&&(i.fnComputed=i.propValue,i.propValue=void 0),"function"!=typeof i.propValue||i.isComputed||(i.propValue=i.propValue.bind(i.context)),i}return t(o,e),o.prototype.notify=function(){var e=this;y(this.watches,(function(t){return t.callback.call(e.context,e.propValue,e.propValueOld)}))},o.prototype.onChange=function(e,t){var n=new $(this,e,{node:t});return this.watches.push(n),n},o.transform=function(e){var t=e.context,i=function(e,a,u,c){if(Array.isArray(e)){if(null==c)return n.warn("Cannot transform this array to a reactive one because no reactive objecto was provided"),e;if(-1!==a.indexOf(e))return e;a.push(e);var l=e,d={};Object.setPrototypeOf(l,Object.create(Array.prototype));var f=Object.getPrototypeOf(l);return y(["push","pop","unshift","shift","splice"],(function(e){d[e]=l[e].bind(l),f[e]=function(){var t=l.slice(),n=[].slice.call(arguments);switch(e){case"push":case"unshift":y(x(n),(function(e){(s(e)||Array.isArray(e))&&i(e,a,u)}))}var r=d[e].apply(l,n);return y(c.watches,(function(r){return r.callback(l,t,{method:e,args:n})})),r}})),l}return s(e)?(-1!==a.indexOf(e)||(a.push(e),y(Object.keys(e),(function(n){var c=e;if("value"in r.descriptor(e,n)){var l=c[n];if(!(l instanceof Object&&(l._IRT_||l instanceof Node))){var d=new o({propName:n,srcObject:e,context:t});r.set(e,n,d),Array.isArray(l)?(i(l,a,u,d),y(l,(function(e){return i(e,a,u)}))):s(l)&&i(l,a,u)}}})),a.splice(a.indexOf(e),1),u.push(e)),e):e};return i(e.data,[],[],e.reactiveObj)},o}(q),B=function(e){function o(t,n,r){var o=e.call(this)||this;return o.$custom={},o.errorMsgEmptyNode=function(e){return"Expected an expression in \u201c"+e.nodeName+"\u201d and got an <empty string>."},o.errorMsgNodeValue=function(e){return"Expected an expression in \u201c"+e.nodeName+"\u201d and got \u201c"+d(e.nodeValue,"")+"\u201d."},o.compiler=n,o.context=r,o.bouer=n.bouer,o.$custom=t,o.serviceProvider=new S(o.bouer),o.evaluator=o.serviceProvider.get("Evaluator"),o.delimiter=o.serviceProvider.get("DelimiterHandler"),o.binder=o.serviceProvider.get("Binder"),o.eventHandler=o.serviceProvider.get("EventHandler"),o}return t(o,e),o.prototype.toOwnerNode=function(e){return e.ownerElement||e.parentNode},o.prototype.skip=function(e){e.nodeValue="true"},o.prototype.if=function(e,t){var r=this,o=this.toOwnerNode(e),i=o.parentElement;if(i){var s=[],u=N(),c=e.nodeName,l=function(){};if(c!==_.elseif&&c!==_.else){var f=o,h=[],v=function(){if(null==f)return"break";var e=b(f,["e-if","e-else-if","e-else"]);if(!e)return"break";var o=s[0];return"e-if"===e.name&&o&&e.name===o.node.name?"break":"e-else"!==e.nodeName&&""===p(d(e.nodeValue,""))?{value:n.error(m.errorMsgEmptyNode(e))}:0!==m.delimiter.run(d(e.nodeValue,"")).length?{value:n.error(m.errorMsgNodeValue(e))}:(s.push({node:e,element:f}),"e-else"===e.nodeName?(f.removeAttribute(e.nodeName),"break"):(M.once("AfterGet",(function(n){n.onemit=function(t){-1===h.findIndex((function(e){return e.reactive.propName==t.propName}))&&h.push({attr:e,reactive:t})},r.evaluator.exec({data:t,code:e.value,context:r.context})})),void f.removeAttribute(e.nodeName)))},m=this;do{var g=v();if("object"==typeof g)return g.value;if("break"===g)break}while(f=f.nextElementSibling);var x=function(){return!a(L.array(s.map((function(e){return e.element})),u).find((function(e){return e.isConnected})))};y(h,(function(e){r.binder.binds.push({isConnected:x,watch:e.reactive.onChange((function(){return l()}),e.attr)})})),(l=function(){y(s,(function(e){e.element.parentElement&&(u.isConnected?i.removeChild(e.element):i.replaceChild(u,e.element))}));var e=s.map((function(e,t){var n=e.node.value;switch(e.node.name){case _.if:return"if("+n+"){ _cb("+t+"); }";case _.elseif:return"else if("+n+"){ _cb("+t+"); }";case _.else:return"else{ _cb("+t+"); }"}})).join(" ");r.evaluator.exec({data:t,isReturn:!1,code:e,context:r.context,aditional:{_cb:function(e){var n=s[e].element;i.replaceChild(n,u),r.compiler.compile({el:n,data:t,context:r.context,isConnected:x})}}})})()}}},o.prototype.show=function(e,t){var r=this,o=this.toOwnerNode(e),i=p(d(e.nodeValue,"")),a=function(e){};if(""===i)return n.error(this.errorMsgEmptyNode(e));if(0!==this.delimiter.run(i).length)return n.error(this.errorMsgNodeValue(e));var s=this.binder.create({data:t,node:e,isConnected:function(){return o.isConnected},fields:[{expression:i,field:i}],context:this.context,onUpdate:function(){return a(o)}});(a=function(e){var n=r.evaluator.exec({data:t,code:i,context:r.context});e.style.display=n?"":"none"})(o),o.removeAttribute(s.node.nodeName)},o.prototype.for=function(e,t){var r=this,o=this.toOwnerNode(e),i=o.parentElement;if(i){var u=N(),c=e.nodeName,l=p(d(e.nodeValue,"")),f=[],h=!1,b=!1,g=function(){};if(""===l)return n.error(this.errorMsgEmptyNode(e));if(!l.includes(" of ")&&!l.includes(" in "))return n.error("Expected a valid \u201cfor\u201d expression in \u201c"+c+"\u201d and got \u201c"+l+'\u201d.\nValid: e-for="item of items".');var x=this.delimiter.run(l);0!==x.length&&this.binder.create({node:e,data:t,fields:x,isReplaceProperty:!0,context:this.context,isConnected:function(){return u.isConnected},onUpdate:function(){return g()}}),o.removeAttribute(c);var w=o.cloneNode(!0);i.replaceChild(u,o);for(var C=function(n){var o=function(n,o){var i=(I=I||A(p(d(e.nodeValue,"")))).leftHandParts,a=I.sourceValue,s=I.isForOf,u=L.obj(t),c=i[0],l=i[1]||"_index_or_value",f=i[2]||"_for_in_index";return u[c]=n,u[l]=s?o:a[n],u[f]=o,U.transform({data:u,context:r.context})}(n.item,n.index),a=i.insertBefore(w.cloneNode(!0),n.reference||u);return r.compiler.compile({el:a,data:o,context:r.context,onDone:function(e){return r.eventHandler.emit({eventName:_.builtInEvents.add,attachedNode:e,once:!0})}}),f.splice(n.index,0,{el:a,data:o}),a},A=function(e){var n=e.split("|").map((function(e){return p(e)})),o=n[0].replace(/\(|\)/g,"");n.shift();var i=" of ",a=o.split(i);a.length>1||(a=o.split(i=" in "));var s=a[0],u=a[1],c=s.split(",").map((function(e){return p(e)})),l="of"===p(i)?u:"Object.keys("+u+")";return{filters:n,type:i,leftHand:s,rightHand:u,sourceValue:r.evaluator.exec({data:t,code:u,context:r.context}),leftHandParts:c,iterableExpression:l,isForOf:"of"===p(i)}},E=function(e,o){var i=o.split(":").map((function(e){return p(e)}));if(1!=i.length)return function(e,o){h=!0;var i=o[2],u=o[1];if(a(u)||""===u)return n.error("Invalid where-value in \u201c"+c+"\u201d with \u201c"+l+"\u201d expression."),e;if("function"==typeof(u=r.evaluator.exec({data:t,code:u,context:r.context})))e=u(e);else{if((a(i)||""===i)&&s(e[0]||""))return n.error("Invalid where-keys in \u201c"+c+"\u201d with \u201c"+l+"\u201d expression, at least one where-key to be provided when using list of object."),e;var d=[];y(e,(function(e){var t=!1;if(a(i))t=m(e).includes(u);else for(var n=0,o=i.split(",").map((function(e){return p(e)}));n<o.length;n++){var s=o[n];if(m(r.evaluator.exec({data:e,code:s,context:r.context})).includes(u)){t=!0;break}}t&&d.push(e)})),e=d}return e}(e,i);n.error("Invalid \u201c"+c+"\u201d where expression \u201c"+l+"\u201d, at least a where-value and where-keys, or a filter-function must be provided")},O=M.on("AfterGet",(function(t){r.binder.binds.push({isConnected:function(){return u.isConnected},watch:t.onChange((function(t,n,r){return function(t){if(h||b)return g();var n=(t=t||{}).method,r=t.args,o=f,i=function(){return Promise.resolve((function(t){var n=(I=I||A(p(d(e.nodeValue,"")))).leftHandParts[1]||"_index_or_value";"_index_or_value"!==n&&y(t,(function(e,t){e.data[n]=t}))})).then((function(e){return e(f)}))};switch(n){case"pop":case"shift":if(!(l=o[n]()))return;if(k(l.el),"pop"===n)return;return i();case"splice":var a=r[0],s=r[1];y(o.splice(a,s),(function(e){return k(e.el)}));var c=(I=I||A(p(d(e.nodeValue,"")))).leftHandParts[1]||"_index_or_value";if(y([].slice.call(r,2),(function(e){a++,C({reference:f[a].el||u,index:a,item:e})})),"_index_or_value"===c)return;for(;a<f.length;a++){var l;"number"==typeof(l=f[a].data)[c]&&(l[c]=a)}return;case"push":case"unshift":var v="unshift"==n,m=v?0:o.length,x=v?f[0].el:u;return y([].slice.call(r),(function(e){var t=C({index:m++,reference:x,item:e});v&&(x=t)})),void(v&&i());default:return g()}}(r)}),e)})})),I=A(l),P=I.filters,j=function(e){return P.filter((function(t){return t.substring(0,e.length)===e}))},T=j("where"),V=0,D=T;V<D.length;V++){var S=D[V];E(I.sourceValue,S)}O.off(),(g=function(){var o=(I=I||A(p(d(e.nodeValue,"")))).iterableExpression,s=j("order");y(f,(function(e){e.el.parentElement&&i.removeChild(e.el)})),f=[],r.evaluator.exec({data:t,isReturn:!1,context:r.context,code:"var __e = __each, __fl = __filters, __f = __for; __f(__fl("+o+"), function($$itm, $$idx) { __e($$itm, $$idx); })",aditional:{__for:y,__each:function(e,t){return C({index:t,item:e})},__filters:function(e){for(var t=L.array(e),r=0,o=T;r<o.length;r++){var i=o[r];t=E(t,i)}for(var u=function(e){var r=e.split(":").map((function(e){return p(e)}));1==r.length?n.error("Invalid \u201c"+c+"\u201d order  expression \u201c"+l+"\u201d, at least the order type must be provided"):t=function(e,t,r){return b=!0,t||(t="asc"),e.sort((function(e,o){var i=function(e,r){if(a(e)||a(r))return 0;switch(v(t)){case"asc":return e?1:-1;case"desc":return r?-1:1;default:return n.log("The \u201c"+t+"\u201d order type is invalid: \u201c"+l+"\u201d. Available types are: \u201casc\u201d  for order ascendent and \u201cdesc\u201d for order descendent."),0}};return r?i(e[r]>o[r],o[r]<e[r]):i(e>o,o<e)}))}(t,r[1],r[2])},d=0,f=s;d<f.length;d++){u(f[d])}return t}}}),I=null})()}},o.prototype.def=function(e,t){var o=this.toOwnerNode(e),i=p(d(e.nodeValue,""));if(""===i)return n.error(this.errorMsgEmptyNode(e));if(0!==this.delimiter.run(i).length)return n.error(this.errorMsgNodeValue(e));var a={},u=M.on("AfterGet",(function(e){e.propName in a||(a[e.propName]=void 0),r.set(a,e.propName,e)})),c=this.evaluator.exec({data:t,code:i,context:this.context});if(!s(c))return n.error("Expected a valid Object Literal expression in \u201c"+e.nodeName+"\u201d and got \u201c"+i+"\u201d.");y(Object.keys(c),(function(e){e in a||(a[e]=c[e])})),M.off("AfterGet",u.callback),this.bouer.set(a,t),o.removeAttribute(e.nodeName)},o.prototype.text=function(e){var t=this.toOwnerNode(e),r=p(d(e.nodeValue,""));if(""===r)return n.error(this.errorMsgEmptyNode(e));t.textContent=r,t.removeAttribute(e.nodeName)},o.prototype.bind=function(e,t){var r=this.toOwnerNode(e),o=p(d(e.nodeValue,""));return""===o?n.error(this.errorMsgEmptyNode(e)):0!==this.delimiter.run(o).length?n.error(this.errorMsgNodeValue(e)):(this.binder.create({node:e,isConnected:function(){return r.isConnected},fields:[{field:o,expression:o}],context:this.context,data:t}),void r.removeAttribute(e.nodeName))},o.prototype.property=function(e,t){var r=this,o=this.toOwnerNode(e),i=p(d(e.nodeValue,"")),a=function(e){},u=function(e){return"Invalid value, expected an Object/Object Literal in \u201c"+e.nodeName+"\u201d and got \u201c"+d(e.nodeValue,"")+"\u201d."};if(""===i)return n.error(u(e));if(0===this.delimiter.run(i).length){var c=this.evaluator.exec({data:t,code:i,context:this.context});if(!s(c))return n.error(u(e));this.binder.create({data:t,node:e,isReplaceProperty:!1,context:this.context,fields:[{expression:i,field:i}],isConnected:function(){return o.isConnected},onUpdate:function(){return a(r.evaluator.exec({data:t,code:i,context:r.context}))}}),o.removeAttribute(e.nodeName),(a=function(t){var n=e.nodeName.substring(_.property.length),r=o.attributes[n];if(r||(o.setAttribute(n,""),r=o.attributes[n]),y(Object.keys(t),(function(e){if(!t[e])return r.value=p(r.value.replace(e,""));r.value=r.value.includes(e)?r.value:p(r.value+" "+e)})),""===r.value)return o.removeAttribute(n)})(c)}},o.prototype.data=function(e,t){var o=this.toOwnerNode(e),i=p(d(e.nodeValue,""));if(0!==this.delimiter.run(i).length)return n.error("The \u201cdata\u201d attribute cannot contain delimiter.");o.removeAttribute(e.nodeName);var a={},u=L.obj(t,{$data:t}),c=M.on("AfterGet",(function(e){e.propName in a||(a[e.propName]=void 0),r.set(a,e.propName,e)}));if(""===i)a=L.obj(this.bouer.data);else{var l=this.evaluator.exec({data:u,code:i,context:this.context});if(!s(l))return n.error("Expected a valid Object Literal expression in \u201c"+e.nodeName+"\u201d and got \u201c"+i+"\u201d.");y(Object.keys(l),(function(e){e in a||(a[e]=l[e])}))}M.off("AfterGet",c.callback);var f=e.nodeName.split(":")[1];return f&&(f=f.replace(/\[|\]/g,""),this.serviceProvider.get("DataStore").set("data",f,a)),U.transform({context:this.context,data:a}),this.compiler.compile({data:a,el:o,context:this.context})},o.prototype.href=function(e,t){var r=this,o=this.toOwnerNode(e),i=p(d(e.nodeValue,""));if(""===i)return n.error(this.errorMsgEmptyNode(e));o.removeAttribute(e.nodeName);var a=O(d(this.bouer.config.usehash,!0)?"#":"",i);o.setAttribute("href",a);var s=o.attributes.href,u=this.delimiter.run(i);0!==u.length&&this.binder.create({data:t,node:s,isConnected:function(){return o.isConnected},context:this.context,fields:u}),o.addEventListener("click",(function(e){e.preventDefault(),r.serviceProvider.get("Routing").navigate(s.value)}),!1)},o.prototype.entry=function(e,t){var r=this.toOwnerNode(e),o=p(d(e.nodeValue,""));return""===o?n.error(this.errorMsgEmptyNode(e)):0!==this.delimiter.run(o).length?n.error(this.errorMsgNodeValue(e)):(r.removeAttribute(e.nodeName),void this.serviceProvider.get("ComponentHandler").prepare([{name:o,template:r.outerHTML,data:t}]))},o.prototype.put=function(e,t){var r=this,o=this.toOwnerNode(e),i=p(d(e.nodeValue,"")),a=function(){};return""===i?n.error(this.errorMsgEmptyNode(e),"Direct <empty string> injection value is not allowed."):0!==this.delimiter.run(i).length?n.error("Expected an expression with no delimiter in \u201c"+e.nodeName+"\u201d and got \u201c"+d(e.nodeValue,"")+"\u201d."):(this.binder.create({data:t,node:e,isConnected:function(){return o.isConnected},fields:[{expression:i,field:i}],context:this.context,isReplaceProperty:!1,onUpdate:function(){return a()}}),o.removeAttribute(e.nodeName),void(a=function(){if(o.innerHTML="",""!==(i=p(d(e.nodeValue,"")))){var n=w(i).appendTo(o).build();r.serviceProvider.get("ComponentHandler").order(n,t)}})())},o.prototype.req=function(e,t){var o=this,a=this.toOwnerNode(e),s=this.toOwnerNode(a),u=e.nodeName,c=p(d(e.nodeValue,""));if(!c.includes(" of ")&&!c.includes(" as "))return n.error("Expected a valid \u201cfor\u201d expression in \u201c"+u+"\u201d and got \u201c"+c+'\u201d.\nValid: e-req="item of url".');var l,f=this.delimiter.run(c),h={},v=(e.nodeName.split(":")[1]||"").replace(/\[|\]/g,""),m=N(void 0,"request-"+(v||i(6))),b=function(){},y={node:e,data:t,nodeName:u,nodeValue:c,fields:f,parent:a,value:c};s.insertBefore(m,a),0!==f.length&&(y=this.binder.create({data:t,node:e,fields:f,context:this.context,isReplaceProperty:!1,isConnected:function(){return m.isConnected},onUpdate:function(){return b()}})),a.removeAttribute(e.nodeName),r.set(a,"isConnected",{get:function(){return m.isConnected}});var g=function(e){var n=a.attributes.getNamedItem(_.on+e);return n&&o.eventHandler.compile(n,t,o.context),{emit:function(t){o.eventHandler.emit({attachedNode:a,eventName:e,init:{detail:t}})}}},x=function(e){var t=e.split("|").map((function(e){return p(e)})),n=t.shift().replace(/\(|\)/g,""),r=" of ",o=n.split(r);return o.length>1||(o=n.split(r=" as ")),{filters:t,type:p(r),expression:p(n),variables:p(o[0]),path:p(o[1])}},w=function(e,t){return e?"data"in e?"of"!==t||Array.isArray(e.data)?"as"!==t||"object"==typeof e.data||(n.error('Using e-req="... \u201cas\u201d ..." the response must be a list of items, and got \u201c'+typeof e.data+"\u201d."),!1):(n.error('Using e-req="... \u201cof\u201d ..." the response must be a list of items, and got \u201c'+typeof e.data+"\u201d."),!1):(n.error("the return must contain the \u201cdata\u201d property. Example: { data: {} | [] }"),!1):(n.error("the return must be an object containing \u201cdata\u201d property. Example: { data: {} | [] }"),!1)},C=this.serviceProvider.get("Middleware");if(!C.has("req"))return n.error("There is no \u201creq\u201d middleware provided for the \u201ce-req\u201d directive requests.");(l=function(){var s=x(p(e.nodeValue||""));g(_.builtInEvents.request).emit(),C.run("req",{type:"onBind",action:function(e){e({binder:y,detail:{requestType:s.type,requestPath:s.path,reponseData:h}},{success:function(e){!function(e){var u;if(w(e,s.type)){if(U.transform({context:o.context,data:e}),v&&o.serviceProvider.get("DataStore").set("req",v,e),g(_.builtInEvents.response).emit({response:e}),"data"in h)return h.data=e.data;if(h.data=void 0,r.transfer(h,e,"data"),"as"===s.type){var c=p(s.variables.split(",")[0].replace(/\(|\)/g,""));return c in t?n.error("There is already a \u201c"+c+"\u201d defined in the current scope. Provide another variable name in order to continue."):(t[c]=e.data,o.compiler.compile({el:a,data:U.transform({context:o.context,data:t}),context:o.context,isConnected:function(){return m.isConnected}}))}if("of"===s.type){var l=i(8,"res"),d=s.expression.replace(s.path,l),f=L.obj(((u={})[l]=e.data,u),t);a.setAttribute(_.for,d),r.set(f,l,r.descriptor(e,"data")),o.compiler.compile({el:a,data:f,context:o.context,isConnected:function(){return m.isConnected}})}}}(e)},fail:function(e){return g(_.builtInEvents.fail).emit({error:e})},done:function(){return g(_.builtInEvents.done).emit()}})}})})(),b=function(){var t=x(p(e.nodeValue||""));C.run("req",{type:"onUpdate",default:function(){return l()},action:function(e){e({binder:y,detail:{requestType:t.type,requestPath:t.path,reponseData:h}},{success:function(e){w(e,t.type)&&(h.data=e.data)},fail:function(e){return g(_.builtInEvents.fail).emit({error:e})},done:function(){return g(_.builtInEvents.done).emit()}})}})}},o.prototype.wait=function(e){var t=this,r=this.toOwnerNode(e),o=p(d(e.nodeValue,""));if(""===o)return n.error(this.errorMsgEmptyNode(e));if(0!==this.delimiter.run(o).length)return n.error(this.errorMsgNodeValue(e));r.removeAttribute(e.nodeName);var i=this.serviceProvider.get("DataStore"),a=i.wait[o];if(a){if(a.nodes.push(r),!a.data)return;y(a.nodes,(function(e){t.compiler.compile({el:e,context:a.context,data:U.transform({context:a.context,data:a.data})})})),d(a.once,!1)&&delete i.wait[o]}return i.wait[o]={nodes:[r],context:this.context}},o.prototype.custom=function(e,t){var n=this.toOwnerNode(e),r=e.nodeName,o=p(d(e.nodeValue,"")),i=this.delimiter.run(o),a=this.$custom[r],s=this.binder.create({data:t,node:e,fields:i,isReplaceProperty:!1,context:this.context,isConnected:function(){return n.isConnected},onUpdate:function(){"function"==typeof a.onUpdate&&a.onUpdate(e,s)}});d(a.removable,!0)&&n.removeAttribute(r);var u=r.split(".");u.shift();var c=(r.split(":")[1]||"").split(".")[0];return s.modifiers=u,s.argument=c,"function"==typeof a.onBind&&d(a.onBind(e,s),!1)},o.prototype.skeleton=function(e){""===p(d(e.nodeValue,""))&&this.toOwnerNode(e).removeAttribute(e.nodeName)},o}(q),G=function(e){function r(t,n){var r=e.call(this)||this;return r.NODES_TO_IGNORE_IN_COMPILATION={SCRIPT:1,"#comment":8},r.bouer=t,r.serviceProvider=new S(t),r.directives=null!=n?n:{},r.binder=r.serviceProvider.get("Binder"),r.delimiter=r.serviceProvider.get("DelimiterHandler"),r.eventHandler=r.serviceProvider.get("EventHandler"),r.component=r.serviceProvider.get("ComponentHandler"),S.add("Compiler",r),r}return t(r,e),r.prototype.compile=function(e){var t=this,r=e.el,o=e.context||this.bouer,i=e.data||this.bouer.data,a=e.isConnected||function(){return r.isConnected};if(!r)return n.error("Invalid element provided to the compiler.");if(!this.analize(r.outerHTML))return r;var s=new B(this.directives||{},this,o),c=function(r,i){if(!(r.nodeName in t.NODES_TO_IGNORE_IN_COMPILATION)){if(r instanceof Element){if(_.skip in r.attributes)return s.skip(r);if((r.localName.toLowerCase()===_.slot||r.tagName.toLowerCase()===_.slot)&&e.componentSlot){var l=e.componentSlot,d=function(e,t){var n=function(e){var n=e.cloneNode(!0);t.parentNode.insertBefore(n,t),c(n,i)};"SLOTCONTAINER"===e.nodeName||"SLOT"===e.nodeName?y(x(e.childNodes),(function(e){return n(e)})):n(e),t.parentNode.removeChild(t)};if(r.hasAttribute("default")){if(0==l.childNodes.length)return;return d(l,r)}if(r.hasAttribute("name")){var f=r.attributes.getNamedItem("name");return function e(t){var n=t.getAttribute(_.slot);return n&&n===f.value?(t.removeAttribute(_.slot),d(t,r)):0===t.children.length?null:void y(x(t.children),(function(t){e(t)}))}(l)}}if(_.def in r.attributes&&s.def(r.attributes.getNamedItem(_.def),i),_.entry in r.attributes&&s.entry(r.attributes.getNamedItem(_.entry),i),_.wait in r.attributes)return s.wait(r.attributes.getNamedItem(_.wait));if(t.component.check(r.localName))return t.component.order(r,i);if(_.for in r.attributes)return s.for(r.attributes.getNamedItem(_.for),i);if(_.if in r.attributes)return s.if(r.attributes.getNamedItem(_.if),i);(_.elseif in r.attributes||_.else in r.attributes)&&n.warn("The \u201c"+_.elseif+"\u201d or \u201c"+_.else+"\u201d requires an element with \u201c"+_.if+"\u201d above."),_.show in r.attributes&&s.show(r.attributes.getNamedItem(_.show),i);var p=null;if((p=r.attributes.getNamedItem(_.req))||(p=x(r.attributes).find((function(e){return _.check(e,_.req)}))))return s.req(p,i);var v;if(v=x(r.attributes).find((function(e){var t=e.name;return t===_.data||h(t,_.data+":")})))return s.data(v,i);if(_.put in r.attributes)return s.put(r.attributes.getNamedItem(_.put),i);y(x(r.attributes),(function(e){c(e,i)}))}if(_.check(r,_.href))return s.href(r,i);if(_.check(r,_.text))return s.text(r);if(_.check(r,_.bind))return s.bind(r,i);if(!Object.keys(s.$custom).find((function(e){return _.check(r,e)}))||!s.custom(r,i)){if(_.check(r,_.property)&&!_.isConstant(r.nodeName)&&s.property(r,i),_.check(r,_.skeleton)&&s.skeleton(r),_.check(r,_.on))return t.eventHandler.compile(r,i,o);var m,b;if(m=t.delimiter.shorthand(r.nodeName)){var g=r.ownerElement||r.parentNode,N=V.createAttribute("e-"+m.expression);return N.value="{{ "+m.expression+" }}",g.attributes.setNamedItem(N),g.attributes.removeNamedItem(m.field),t.binder.create({node:N,isConnected:a,fields:[{expression:m.expression,field:N.value}],context:o,data:i})}u(r.nodeValue)&&(b=t.delimiter.run(r.nodeValue))&&0!==b.length&&t.binder.create({node:r,isConnected:a,fields:b,context:o,data:i}),y(x(r.childNodes),(function(e){return c(e,i)}))}}};return c(r,i),r.hasAttribute(_.silent)&&r.removeAttribute(_.silent),l(e.onDone)&&j(e.onDone.call(o,r)),this.eventHandler.emit({eventName:_.builtInEvents.compile,attachedNode:r,once:!0,init:{detail:i}}),r},r.prototype.analize=function(e){return!0},r}(q),F=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return t(r,e),r.htmlToJsObj=function(e,t,r){var o=void 0;if(e instanceof HTMLElement)o=e;else if("string"==typeof e)try{var i=V.querySelector(e);if(!i)return n.error('Element with "'+e+'" selector Not Found.'),null;o=i}catch(e){return n.error(P(e)),null}if(a(o))throw n.error('Invalid element provided at app.toJsObj(> "'+e+'" <).');var u=((t=t||{}).names||"[name]").replace(/\[|\]/g,"").split(","),d=(t.values||"[value]").replace(/\[|\]/g,"").split(","),f=function(e,t){return t in e?e[t]:e.getAttribute(t)||e.innerText},p=function(e){var t={},n={BUTTON:!0},o={checkbox:!0,radio:!0};return function e(i){var a=b(i,u);if(a){var s=a.value;if(!0===n[i.tagName])return;if(i instanceof HTMLInputElement&&!0===o[i.type]&&!1===i.checked)return;var c=t[s],p=i.hasAttribute(_.array),h=function(e){var t=void 0;return d.find((function(n){return!!(t=f(e,n))})),t}(i);t[s]=p?c?L.array(c,h):[h]:c?L.array(c,h):h,l(r)&&j(r(t,s,h,i))}y(x(i.children),(function(t){b(t,[_.build])||e(t)}))}(e),t},h=p(o);return y(x(o.querySelectorAll("[".concat(_.build,"]"))),(function(e){var t=f(e,_.build),n=e.hasAttribute(_.array),o=p(e);(function(e){if(c(e))return!1;for(var t=!1,n=Object.keys(e),r=0;r<n.length;r++)if(!a(n[r])){t=!0;break}return t})(o)&&function t(i,u){var d=i.split("."),f=d[0];d.shift();var p=u[f];return a(p)&&(u[f]={}),0===d.length?(n?s(p)&&!c(p)?u[f]=[L.obj(p,o)]:Array.isArray(p)?p.push(o):u[f]=[o]:a(p)?u[f]=o:u[f]=L.obj(p,o),void(l(r)&&j(r(u,f,o,e)))):Array.isArray(p)?y(p,(function(e){t(d.join("."),e)})):void t(d.join("."),u[f])}(t,h)})),h},r}(q),z=function(e){function n(t){var n=e.call(this)||this;return n.url=t||V.location.href,n}return t(n,e),n.prototype.params=function(e){var t=this,n={};if(e&&u(e)){var r=this.url.split("?")[0].split("/").reverse();""===r[0]&&r.shift(),y(e.split("/").reverse(),(function(e,t){var o=RegExp("{([\\S\\s]*?)}").exec(e);Array.isArray(o)&&(n[o[1]]=r[t])}))}return function(){var e=t.url.split("?")[1];if(!e)return t;y(e.split("&"),(function(e){var t=e.split("=");n[t[0]]=(t[1]||"").split("#")[0]}))}(),n},n.prototype.add=function(e){var t=[];y(Object.keys(e),(function(n){t.push(n+"="+e[n])}));var n=t.join("&");return this.url.includes("?")?"&"+n:"?"+n},n.prototype.remove=function(e){return e},n}(q),J=function(e){function o(t){var n=e.call(this)||this;n.isDestroyed=!1,n.children=[],n.assets=[],n.events=[];var r=void 0,o=void 0,i=void 0;return u(t)?o=t:(r=t.name,o=t.path,i=t.data,Object.assign(n,t)),n.name=r,n.path=o,n.data=U.transform({context:n,data:i||{}}),n}return t(o,e),o.prototype.export=function(e){var t=this;return s(e)?y(Object.keys(e),(function(n){t.data[n]=e[n],r.transfer(t.data,e,n)})):n.log('Invalid object for component.export(...), only "Object Literal" is allowed.')},o.prototype.destroy=function(){var e=this;if(!this.el)return!1;if(!(this.isDestroyed&&this.bouer&&this.bouer.isDestroyed)){this.keepAlive||(this.isDestroyed=!0),this.emit("beforeDestroy");var t=this.el.parentElement;t&&t.removeChild(this.el),this.emit("destroyed"),y(this.events,(function(t){return e.off(t.eventName,t.callback)})),this.events=[]}},o.prototype.params=function(){return(new z).params(this.route)},o.prototype.emit=function(e,t){new S(this.bouer).get("EventHandler").emit({eventName:e,attachedNode:this.el,init:t})},o.prototype.on=function(e,t){var r=new Set(["created","beforeMount","mounted","beforeLoad","loaded","beforeDestroy","destroyed"]);new Set(["requested","blocked","failed"]).has(e)&&n.warn("The \u201c"+e+"\u201d Event is called before the component is mounted, to be dispatchedit needs to be on registration object: { "+e+": function(){ ... }, ... }.");var o=new S(this.bouer).get("EventHandler").on({eventName:e,callback:t,attachedNode:this.el,context:this,modifiers:{once:r.has(e),autodestroy:!1}});return this.events.push(o),o},o.prototype.off=function(e,t){new S(this.bouer).get("EventHandler").off({eventName:e,callback:t,attachedNode:this.el}),this.events=g(this.events,(function(n){return!(n.eventName==e&&n.callback==t)}))},o.prototype.addAssets=function(e){var t=[],r={js:"script",css:"link",scss:"link",sass:"link",less:"link",styl:"link",style:"link"},o=function(e,t){var r=!(!e&&!p(e));return r||n.error("Invalid asset \u201csrc\u201d, in assets["+t+"].src"),r},i=function(e,t){var o=e.split("."),i=r[v(o[o.length-1])];return i||n.error("Couldn't find out what type of asset it is, provide the \u201ctype\u201d explicitly at assets["+t+"].type")};y(e,(function(e,n){var a="",s="",u=!0;if("string"==typeof e){if(!o(e,n))return;s=i(p(a=e.replace(/\.less|\.s[ac]ss|\.styl/i,".css")),n)}else{if(!o(p(a=e.src.replace(/\.less|\.s[ac]ss\.styl/i,".css")),n))return;if(e.type)s=r[v(e.type)]||e.type;else if(!(s=i(a,n)))return;u=d(e.scoped,!0)}if("."!==a[0]){var c=E(a),l=c.baseURI===a.substring(0,c.baseURI.length);a=O(l?c.origin:c.baseURI,c.pathname)}var f=w(s,(function(e){switch(d(u,!0)&&e.setAttribute("scoped","true"),v(s)){case"script":default:e.setAttribute("src",a);break;case"link":e.setAttribute("href",a),e.setAttribute("rel","stylesheet"),e.setAttribute("type","text/css")}})).build();t.push(f)})),this.assets.push.apply(this.assets,t)},o}(q),X=function(e){function u(t){var n=e.call(this)||this;return n.requests={},n.components={},n.stylesController={},n.bouer=t,n.serviceProvider=new S(t),n.delimiter=n.serviceProvider.get("DelimiterHandler"),n.eventHandler=n.serviceProvider.get("EventHandler"),S.add("ComponentHandler",n),n}return t(u,e),u.prototype.check=function(e){return e in this.components},u.prototype.request=function(e,t){var r=this;if(!a(this.requests[e]))return this.requests[e].push(t);this.requests[e]=[t];var i=E(e),s=null!=V.head.querySelector("base");o(O(i.baseURI===e.substring(0,i.baseURI.length)?i.origin:i.baseURI,i.pathname),{headers:{"Content-Type":"text/plain"}}).then((function(e){if(!e.ok)throw new Error(e.statusText);return e.text()})).then((function(t){y(r.requests[e],(function(n){n.success(t,e)})),delete r.requests[e]})).catch((function(t){s||n.warn('It seems like you are not using the \u201c<base href="/base/components/path/" />\u201d element, try to add as the first child into \u201c<head></head>\u201d element.'),y(r.requests[e],(function(n){return n.fail(t,e)})),delete r.requests[e]}))},u.prototype.prepare=function(e,t){var r=this;y(e,(function(e,o){if((!e.path||a(e.path))&&(!e.template||a(e.template)))return n.warn("The component at options.components["+o+"] has not valid \u201cpath\u201d or \u201ctemplate\u201d property defined, then it was ignored.");if(a(e.name)||!e.name){if(!e.path||a(e.path))return n.warn("Provide a \u201cname\u201d to component at options.components["+o+"] position.");var s=e.path.toLowerCase().split("/"),u=s[s.length-1].replace(".html","");r.components[u]&&(u=v(i(8,u+"-component-"))),e.name=u}if(e.name=e.name.toLowerCase(),r.components[e.name])return n.warn("The component name \u201c"+e.name+"\u201d is already define, try changing the name.");a(e.route)||(e.route="/"+O(a(t)?"":t.route,e.route)),Array.isArray(e.children)&&r.prepare(e.children,e),r.serviceProvider.get("Routing").configure(r.components[e.name]=e);var c=function(t){t&&r.request(e.path,{success:function(t){e.template=t},fail:function(e){n.error(P(e))}})};return a(e.prefetch)?(e.prefetch=d(r.bouer.config.prefetch,!0))?c(e.path):void 0:!0===e.prefetch?c(e.path):void 0}))},u.prototype.order=function(e,t,r){var o=this,i=v(e.nodeName),a=this.components,s=a[i];if(!s)return n.error("No component with name \u201c"+i+"\u201d registered.");var u=s,c=u,l=function(){if(u.template){var s=u instanceof J?u:new J(u);return s.bouer=o.bouer,o.insert(e,s,t,r),void(!0===u.keepAlive&&(a[i]=u))}if(!u.path)return n.error("Expected a valid value in `path` or `template` got invalid value at \u201c"+i+"\u201d component.");o.addEvent("requested",e,u,o.bouer).emit(),o.request(u.path,{success:function(n){var s=u instanceof J?u:new J(u);c.template=s.template=n,s.bouer=o.bouer,o.insert(e,s,t,r),!0===u.keepAlive&&(a[i]=u)},fail:function(t){n.error("Failed to request <"+i+"></"+i+"> component with path \u201c"+u.path+"\u201d."),n.error(P(t)),o.addEvent("failed",e,u,o.bouer).emit()}})};if(c.restrictions&&c.restrictions.length>0){var d=[],f=c.restrictions.map((function(e){var t=e.call(o.bouer,u);return!1===t?d.push(e):t instanceof Promise&&t.then((function(t){!1===t&&d.push(e)})).catch((function(){return d.push(e)})),t})),p=this.addEvent("blocked",e,u,this.bouer),h=function(){return p.emit({detail:{component:u.name,message:"Component \u201c"+u.name+"\u201d blocked by restriction(s)",blocks:d}})};return Promise.all(f).then((function(e){e.every((function(e){return 1==e}))?l():h()})).catch((function(){return h()}))}return l()},u.prototype.find=function(e){for(var t=Object.keys(this.components),n=0;n<t.length;n++){var r=this.components[t[n]];if(e(r))return r}return null},u.prototype.addEvent=function(e,t,n,r){var o=this,i=n[e];"function"==typeof i&&this.eventHandler.on({eventName:e,callback:function(e){return i.call(r||n,e)},attachedNode:t,modifiers:{once:!0},context:r||n});return{emit:function(r){return function(r){o.eventHandler.emit({attachedNode:t,once:!0,eventName:e,init:r}),o.eventHandler.emit({eventName:"component:"+e,init:{detail:{component:n}},once:!0})}(r)}}},u.prototype.insert=function(e,t,u,c){var f=this,p=v(e.nodeName),m=e.parentElement;if(m){if(a(t.template))return n.error("The <"+p+"></"+p+"> component is not ready yet to be inserted.");var b=w("SlotContainer",(function(t){t.innerHTML=e.innerHTML,e.innerHTML=""})).build();if((!1===(e.hasAttribute("keep-alive")||d(t.keepAlive,!1))||a(t.el))&&C("body",(function(e){return e.innerHTML=t.template,y([].slice.call(e.children),(function(n){-1!==["SCRIPT","LINK","STYLE"].indexOf(n.nodeName)&&(t.assets.push(n),e.removeChild(n))})),0===e.children.length?n.error("The component <"+p+"></"+p+"> seems to be empty or it has not a root element. Example: <div></div>, to be included."):e.children.length>1?n.error("The component <"+p+"></"+p+"> seems to have multiple root element, it must have only one root."):void(t.el=e.children[0])})),!a(t.el)){var N=t.el,k=this.addEvent("created",t.el,t),A=this.addEvent("beforeMount",t.el,t),E=this.addEvent("mounted",t.el,t),O=this.addEvent("beforeLoad",t.el,t),T=this.addEvent("loaded",t.el,t);this.addEvent("beforeDestroy",t.el,t),this.addEvent("destroyed",t.el,t);var D=g(t.assets,(function(e){return"script"===v(e.nodeName)})),S=t.init;l(S)&&j(S.call(t));var q=function(o){try{f.serviceProvider.get("Evaluator").execRaw(o||"",t),k.emit();var a=e.hasAttribute(_.for);a&&!x(e.attributes).find((function(e){return e.name===_.data||h(e.name,_.data+":")}))&&e.setAttribute("data","$data"),y(x(e.attributes),(function(o){if(e.removeAttribute(o.name),"class"===o.nodeName)return e.classList.forEach((function(e){N.classList.add(e)}));if("data"===o.nodeName){if(0!==f.delimiter.run(o.value).length)return n.error("The \u201cdata\u201d attribute cannot contain delimiter, source element: <"+p+"></"+p+">.");var i={},a=L.obj(u,{$data:u}),c=M.on("AfterGet",(function(e){e.propName in i||(i[e.propName]=void 0),r.set(i,e.propName,e)}));if(""===o.value)i=L.obj(f.bouer.data);else{var l=f.serviceProvider.get("Evaluator").exec({data:a,code:o.value,context:f.bouer});if(!s(l))return n.error("Expected a valid Object Literal expression in \u201c"+o.nodeName+"\u201d and got \u201c"+o.value+"\u201d.");y(Object.keys(l),(function(e){e in i||(i[e]=l[e])}))}return c.off(),i=U.transform({context:t,data:i}),y(Object.keys(i),(function(e){r.transfer(t.data,i,e)}))}N.attributes.setNamedItem(o)})),A.emit(),m.replaceChild(N,e),E.emit();var w={};N.classList.forEach((function(e){return w[e]=!0}));var C=function(e,t){var n=[],r="STYLE"===e.nodeName;if(e.sheet){for(var o=e.sheet.cssRules,i=0;i<o.length;i++){var a=o.item(i);if(a){var s=a,u=s.selectorText;if(u){var c=u.split(" ")[0],l="."==c[0]||"#"==c[0]?c.substring(1):c,d=w[l]?"":" ",f="."+t,p=s.selectorText.split(" ");p[0]===v(N.tagName)&&p.shift(),s.selectorText=f+d+p.join(" ")}r&&n.push(s.cssText)}}r&&(e.innerText=n.join(" "))}},j=g(t.assets,(function(e){return"script"!==v(e.nodeName)})),D="component-style";if(y(j,(function(e){var n=e.cloneNode(!0);if(n instanceof HTMLLinkElement){var r="/"===t.path[0]?t.path.substring(1):t.path;n.href=I(r,n.getAttribute("href")||""),n.rel="stylesheet"}if(f.stylesController[p]){var o=f.stylesController[p];if(o.elements.indexOf(N)>-1)return;return o.elements.push(N),y(o.styles,(function(e){N.classList.add(e.getAttribute(D))}))}var a=i(7,"bouer-s");if(n.setAttribute(D,a),n instanceof HTMLLinkElement&&n.hasAttribute("scoped")&&(n.onload=function(e){return C(e.target,a)}),f.stylesController[p]={styles:[V.head.appendChild(n)],elements:[N]},n.hasAttribute("scoped"))return N.classList.add(a),n instanceof HTMLStyleElement?C(n,a):void 0})),O.emit(),f.serviceProvider.get("Compiler").compile({data:U.transform({context:t,data:t.data}),onDone:function(){l(c)&&c(t),T.emit()},componentSlot:b,context:t,el:N}),!1===d(f.bouer.config.autoComponentDestroy,!0))return;H.run((function(e){if(!t.el.isConnected){if(f.bouer.isDestroyed)return e();t.destroy(),e();var n=f.stylesController[t.name];if(n){var r=n.elements.indexOf(t.el);n.elements.splice(r,1),n.elements.length>0||a&&m.isConnected||(y(n.styles,(function(e){return y(x(V.head.children),(function(t){if(t===e)return V.head.removeChild(e)}))})),delete f.stylesController[t.name])}}}))}catch(e){n.error("Error in <"+p+"></"+p+"> component."),n.error(P(e))}};if(0===D.length)return q();var R=[],$=[],B=[],G={};return y(D,(function(e){if(""==e.src||e.innerHTML)R.push(e.innerHTML);else{var n="/"===t.path[0]?t.path.substring(1):t.path;e.src=I(n,e.getAttribute("src")||""),B.push(e.src)}})),0==B.length?q(R.join("\n\n")):y(B,(function(e,t){G[e]=!0,o(e,{headers:{"Content-Type":"text/plain"}}).then((function(e){if(!e.ok)throw new Error(e.statusText);return e.text()})).then((function(n){if(delete G[e],$[t]=n,0===Object.keys(G).length)return q(L.array($,R).join("\n\n"))})).catch((function(t){t.stack="",n.error("Error loading the <script src='"+e+"'><\/script> in <"+p+"></"+p+"> component, remove it in order to be compiled."),n.log(t)}))}))}}},u}(q),W=function(e){function n(t,n){var r=e.call(this)||this;return r.delimiters=[],r.bouer=n,r.delimiters=t,S.add("DelimiterHandler",r),r}return t(n,e),n.prototype.add=function(e){this.delimiters.push(e)},n.prototype.remove=function(e){var t=this.delimiters.findIndex((function(t){return t.name===e}));this.delimiters.splice(t,1)},n.prototype.run=function(e){var t=this;if(a(e)||""===p(e))return[];var n=null,r=function(e,r){for(var o=0;o<t.delimiters.length;o++){var i=t.delimiters[o],a=e.match(RegExp(i.delimiter.open+"([\\S\\s]*?)"+i.delimiter.close,r||""));if(a)return n=i,a}},o=r(e,"g");return o?o.map((function(e){var t=r(e);return{field:t[0],expression:p(t[1]),delimiter:n}})):[]},n.prototype.shorthand=function(e){if(a(e)||""===p(e))return null;var t=e.match(new RegExp("{([\\w{$,-}]*?)}"));return t?{field:t[0],expression:p(t[1])}:null},n}(q),Y=function(e){function r(t){var n=e.call(this)||this;return n.bouer=t,S.add("Evaluator",n),n}return t(r,e),r.prototype.execRaw=function(e,t){try{Function("(function(){ "+e+" }).call(this)").call(t||this.bouer)}catch(e){n.error(P(e))}},r.prototype.exec=function(e){var t=e.data,r=e.args,o=e.code,i=e.isReturn,a=e.aditional,s=e.context,u=L.obj(this.bouer.globalData||{},a||{},t||{},{$root:this.bouer.data,$mixin:L.mixin});try{return Function("var d$=arguments[0].d;return(function(){var r$;with(d$){"+(!1===i?"":"r$=")+o+"}return r$;}).apply(this, arguments[0].a)").call(s||this.bouer,{d:u,a:r})}catch(e){n.error(P(e))}},r}(q),K=function(e){function r(t){var n=e.call(this)||this;return n.$events={},n.input=C("input").build(),n.bouer=t,n.serviceProvider=new S(t),n.evaluator=n.serviceProvider.get("Evaluator"),S.add("EventHandler",n),n.cleanup(),n}return t(r,e),r.prototype.compile=function(e,t,r){var o=this,i=e.ownerElement||e.parentNode,s=e.nodeName;if(a(i))return n.error("Invalid ParentElement of \u201c"+s+"\u201d");var u=p(d(e.nodeValue,"")),c=s.substring(_.on.length).split("."),f=c[0];if(c.shift(),""===u)return n.error("Expected an expression in the \u201c"+s+"\u201d and got an <empty string>.");i.removeAttribute(s);var h=function(e){var i={prevent:"preventDefault",stop:"stopPropagation"};y(c,(function(t){var n=i[t];e[n]&&e[n]()}));var a=[e],s=o.evaluator.exec({data:t,code:u,args:a,aditional:{event:e},context:r});if(l(s))try{s.apply(r,a)}catch(e){n.error(P(e))}},v={},m=["capture","once","passive"];y(c,(function(e){e=e.toLocaleLowerCase(),-1!==m.indexOf(e)&&(v[e]=!0)})),"on"+f in this.input?i.addEventListener(f,h,v):this.on({eventName:f,callback:h,modifiers:v,context:r,attachedNode:i})},r.prototype.on=function(e){var t=this,n=this,r=e.eventName,o=e.callback,i=e.context,a=e.attachedNode,s=e.modifiers,u=function(e){return o.apply(i||t.bouer,[e])},c={eventName:r,attachedNode:a,modifiers:s,callback:u,destroy:function(){return n.off({callback:u,attachedNode:a,eventName:r})},emit:function(e){return t.emit({eventName:r,attachedNode:a,init:(e||{}).init,once:(e||{}).once})}};return this.$events[r]||(this.$events[r]=[]),this.$events[r].push(c),c},r.prototype.off=function(e){var t=e.eventName,n=e.callback,r=e.attachedNode;this.$events[t]&&(this.$events[t]=g(this.$events[t],(function(e){var o=e.eventName===t&&n==e.callback;return(!r||e.attachedNode!==r||!o)&&(e.eventName===t&&e.attachedNode===r&&a(n)?void 0:!o)})))},r.prototype.emit=function(e){var t=this,n=e.eventName,r=e.init,o=e.once,i=e.attachedNode,a=this.$events[n];if(a){var s=function(e,t){e.addEventListener(n,t,{once:!0}),e.dispatchEvent(new CustomEvent(n,r))};this.$events[n]=g(a,(function(e){var a=e.attachedNode,u=d((e.modifiers||{}).once,!1)||d(o,!1);return i?a!==i||(s(a,e.callback),!u):a?(s(a,e.callback),!u):(j(e.callback.call(t.bouer,new CustomEvent(n,r))),!u)}))}},r.prototype.cleanup=function(){var e=this;0!=d(this.bouer.config.autoOffEvent,!0)&&H.run((function(){y(Object.keys(e.$events),(function(t){e.$events[t]=g(e.$events[t],(function(e){return!1===(e.modifiers||{}).autodestroy||(!e.attachedNode||(!!e.attachedNode.isConnected||void 0))}))}))}))},r}(q),Q=function(e){function n(t){var n=e.call(this)||this;return n.middlewareConfigContainer={},n.run=function(e,t){var r=n.middlewareConfigContainer[e];if(!r)return(t.default||function(){})();for(var o=0,i=r[o],a=function(){var e=!1,n=i[t.type];if(n?t.action((function(t,r){Promise.resolve(n(t,(function(){e=!0}))).then((function(t){e||r.success(t),r.done()})).catch((function(t){e||r.fail(t),r.done()}))})):(t.default||function(){})(),0==e)return"break";i=r[++o]};null!=i;){if("break"===a())break}},n.register=function(e,t){n.middlewareConfigContainer[e]||(n.middlewareConfigContainer[e]=[]);var r={};t((function(e){return r.onBind=e}),(function(e){return r.onUpdate=e})),n.middlewareConfigContainer[e].push(r)},n.has=function(e){var t=n.middlewareConfigContainer[e];return!!t&&t.length>0},n.bouer=t,S.add("Middleware",n),n}return t(n,e),n}(q),Z=function(e){function r(t){var n=e.call(this)||this;return n.routeView=null,n.activeAnchors=[],n.base=null,n.bouer=t,S.add("Routing",n),n}return t(r,e),r.prototype.init=function(){var e=this;if(this.routeView=f(this.bouer.el).querySelector("[route-view]"),!a(this.routeView)){this.routeView.removeAttribute("route-view"),this.base="/";var t=V.head.querySelector("base");if(t){var r=t.attributes.getNamedItem("href");if(!r)return n.error('The href="/" attribute is required in base element.');this.base=r.value}this.defaultPage&&this.navigate(V.location.href),T.addEventListener("popstate",(function(t){t.preventDefault(),e.navigate((t.state||{}).url||location.href,{setURL:!1})}))}},r.prototype.navigate=function(e,t){var r=this;if(void 0===t&&(t={}),this.routeView){if(a(e))return n.log("Invalid url provided to the navigation method.");var o=E(e=p(e)),i=d(this.bouer.config.usehash,!0),u=(i?o.hash:o.pathname).split("?")[0];"/"===u[u.length-1]&&(u=u.substring(0,u.length-1));var c=this.toPage(u);if(this.clear(),c&&(c||!e.endsWith(".html"))){var l=w(c.name,(function(e){e.setAttribute("data",s(t.data)?JSON.stringify(t.data):"$data")})).appendTo(this.routeView).build();V.title=c.title||V.title,d(t.setURL,!0)&&this.pushState(o.href,V.title);var f=O(o.baseURI,i?"#":"",c.route);new S(this.bouer).get("ComponentHandler").order(l,this.bouer.data,(function(){r.markActiveAnchorsWithRoute(f)}))}}},r.prototype.pushState=function(e,t){e=E(e).href,V.location.href!==e&&T.history.pushState({url:e,title:t},t||"",e)},r.prototype.popState=function(e){a(e)&&(e=-1),T.history.go(e)},r.prototype.toPage=function(e){return""===e||"/"===e||e==="/"+O((this.base,"index.html"))?this.defaultPage:new S(this.bouer).get("ComponentHandler").find((function(t){if(!t.route)return!1;var n=t.route.replace(/{(.*?)}/gi,"[\\S\\s]{1,}");return!!Array.isArray(new RegExp("^"+n+"$","i").exec(e))}))||this.notFoundPage},r.prototype.markActiveAnchorsWithRoute=function(e){var t=this,n=this.bouer.config.activeClassName||"active-link",r=f(this.bouer.el),o=r.querySelectorAll("a");a(e)||(y(this.activeAnchors,(function(e){return e.classList.remove(n)})),y([].slice.call(r.querySelectorAll("a."+n)),(function(e){return e.classList.remove(n)})),this.activeAnchors=[],y(x(o),(function(r){r.href.split("?")[0]===e.split("?")[0]&&(r.classList.add(n),t.activeAnchors.push(r))})))},r.prototype.markActiveAnchor=function(e){var t=this.bouer.config.activeClassName||"active-link";a(e)||(y(this.activeAnchors,(function(e){return e.classList.remove(t)})),y([].slice.call(f(this.bouer.el).querySelectorAll("a."+t)),(function(e){return e.classList.remove(t)})),e.classList.add(t),this.activeAnchors=[e])},r.prototype.clear=function(){this.routeView.innerHTML=""},r.prototype.configure=function(e){return!0!==e.isDefault||a(this.defaultPage)?!0!==e.isNotFound||a(this.notFoundPage)?(!0===e.isDefault&&(this.defaultPage=e),void(!0===e.isNotFound&&(this.notFoundPage=e))):n.warn("There are multiple \u201cNotFound Page\u201d provided, check the \u201c"+e.route+"\u201d route."):n.warn("There are multiple \u201cDefault Page\u201d provided, check the \u201c"+e.route+"\u201d route.")},r}(q),ee=function(e){function n(t){var n=e.call(this)||this;return n.backgroudColor="",n.waveColor="",n.defaultBackgroudColor="#E2E2E2",n.defaultWaveColor="#ffffff5d",n.identifier="bouer",n.reset(),n.bouer=t,n.style=C("style",(function(e){return e.id=n.identifier})).build(),S.add("Skeleton",n),n}return t(n,e),n.prototype.reset=function(){this.backgroudColor=this.defaultBackgroudColor,this.waveColor=this.defaultWaveColor},n.prototype.init=function(e){var t=this;if(this.style&&(V.getElementById(this.identifier)||V.head.appendChild(this.style),this.style.sheet)){for(var n=0;n<this.style.sheet.cssRules.length;n++)this.style.sheet.deleteRule(n);e?(this.backgroudColor=e.background||this.defaultBackgroudColor,this.waveColor=e.wave||this.defaultWaveColor):this.reset();var r=_.skeleton,o=this.backgroudColor;y(["[--s]{ display: none!important; }","["+r+"] { background-color: "+o+"!important; position: relative!important; overflow: hidden; }","["+r+"],["+r+"] * { color: transparent!important; }","["+r+"]::before, ["+r+']::after { content: ""; position: absolute; top: 0; left: 0; right: 0; bottom: 0; display: block; }',"["+r+"]::before { background-color: "+o+"!important; z-index: 1;}","["+r+"]::after { transform: translateX(-100%); background: linear-gradient(90deg, transparent, "+this.waveColor+", transparent); animation: loading 1.5s infinite; z-index: 2; }","@keyframes loading { 100% { transform: translateX(100%); } }","@-webkit-keyframes loading { 100% { transform: translateX(100%); } }"],(function(e){return t.style.sheet.insertRule(e)}))}},n.prototype.clear=function(e){e=e?'="'+e+'"':"",y(x(f(this.bouer.el).querySelectorAll("["+_.skeleton+e+"]")),(function(e){return e.removeAttribute(_.skeleton)}))},n}(q),te=function(e){function r(t){var n=e.call(this)||this;return n.wait={},n.data={},n.req={},n.serviceProvider=new S(n.bouer=t),n.serviceProvider.add("DataStore",n),n}return t(r,e),r.prototype.set=function(e,t,r){if("wait"===e)return n.warn("Only \u201cget\u201d is allowed for type of data");this.serviceProvider.get("DataStore")[e][t]=r},r.prototype.get=function(e,t,n){var r=this.serviceProvider.get("DataStore")[e][t];return!0===n&&this.unset(e,t),r},r.prototype.unset=function(e,t){delete this.serviceProvider.get("DataStore")[e][t]},r}(q),ne=function(e){function o(t,o){var i=e.call(this)||this;i.name="Bouer",i.version="3.0.0",i.__id__=S.genId(),i.refs={},i.isDestroyed=!1,i.isInitialized=!1;var s=i;i.options=o=o||{},i.config=o.config||{},i.deps=o.deps||{},y(Object.keys(i.deps),(function(e){var t=i.deps,n=t[e];t[e]="function"==typeof n?n.bind(i):n})),new S(s),new Y(s);var u=new te(s),c=new Q(s);"function"==typeof o.middleware&&o.middleware.call(s,c.register,s),i.data=U.transform({data:o.data||{},context:s}),i.globalData=U.transform({data:o.globalData||{},context:s});var l=o.delimiters||[];l.push.apply(l,[{name:"common",delimiter:{open:"{{",close:"}}"}},{name:"html",delimiter:{open:"{{:html ",close:"}}"}}]),new R(s),new K(s);var h=new W(l,s),v=new X(s),m=new G(s,o.directives),b=new ee(s);return i.$routing=new Z(s),i.$delimiters={add:h.add,remove:h.remove,get:function(){return h.delimiters.slice()}},i.$data={get:function(e){return e?u.data[e]:null},set:function(e,t,r){return e in u.data?n.log("There is already a data stored with this key \u201c"+e+"\u201d."):(!0===d(r,!1)&&U.transform({context:s,data:t}),new S(s).get("DataStore").set("data",e,t))},unset:function(e){return delete u.data[e]}},i.$req={get:function(e){return e?u.req[e]:void 0},unset:function(e){return delete u.req[e]}},i.$wait={get:function(e){if(!e){var t=u.wait[e];if(t)return d(t.once,!0)&&i.$wait.unset(e),t.data}},set:function(e,t,n){if(!(e in u.wait))return u.wait[e]={data:t,nodes:[],once:d(n,!1),context:s};var r=u.wait[e];r.data=t,y(r.nodes,(function(e){e&&m.compile({el:e,context:r.context,data:U.transform({context:r.context,data:r.data})})})),d(n,!1)&&i.$wait.unset(e)},unset:function(e){return delete u.wait[e]}},i.$skeleton={clear:function(e){return b.clear(e)},set:function(e){return b.init(e)}},i.$components={add:function(e){return v.prepare([e])},get:function(e){return v.components[e]}},r.set(i,"refs",{get:function(){var e={};return y(x(f(i.el).querySelectorAll("["+_.ref+"]")),(function(t){var r=p(t.attributes[_.ref].value)||t.name||"";return""===r?n.error("Expected an expression in \u201c"+t.name+"\u201d or at least \u201cname\u201d attribute to combine with \u201c"+t.name+"\u201d."):r in e?n.warn("The key \u201c"+r+"\u201d in \u201c"+t.name+"\u201d is taken, choose another key.",t):void(e[r]=t)})),e}}),v.prepare(o.components||[]),a(t)||""===p(t)||i.init(t),i}return t(o,e),o.create=function(e){return(e=e||{}).config=e.config||{},(e.config||{}).autoUnbind=!1,(e.config||{}).autoOffEvent=!1,(e.config||{}).autoComponentDestroy=!1,new o("",e)},o.toJsObj=function(e,t,n){return F.htmlToJsObj(e,t,n)},o.prototype.init=function(e){var t=this;if(this.isInitialized)return this;if(a(e)||""===p(e))throw n.error(new Error("Invalid selector provided to the instance."));var r=this,o=V.querySelector(e);if(!(this.el=o))throw n.error(new SyntaxError("Element with selector \u201c"+e+"\u201d not found."));var i=this.options||{},s=S.get(r,"Binder"),u=S.get(r,"EventHandler"),c=S.get(r,"Routing"),l=S.get(r,"Skeleton"),d=S.get(r,"Compiler");return y([i.beforeLoad,i.loaded,i.beforeDestroy,i.destroyed],(function(e){"function"==typeof e&&u.on({eventName:e.name,callback:e,attachedNode:o,modifiers:{once:!0},context:r})})),u.emit({eventName:"beforeLoad",attachedNode:o}),(i.config||{}).autoUnbind=!0,(i.config||{}).autoOffEvent=!0,(i.config||{}).autoComponentDestroy=!0,c.init(),l.init(),s.cleanup(),u.cleanup(),this.isInitialized=!0,d.compile({el:this.el,data:this.data,context:r,onDone:function(){return u.emit({eventName:"loaded",attachedNode:o})}}),T.addEventListener("beforeunload",(function(){t.isDestroyed||(u.emit({eventName:"beforeDestroy",attachedNode:o}),t.destroy())}),{once:!0}),H.run((function(e){if(t.isDestroyed)return e();o.isConnected||(u.emit({eventName:"beforeDestroy",attachedNode:o}),t.destroy(),e())})),V.head.querySelector('link[rel~="icon"]')||C("link",(function(e){e.rel="icon",e.type="image/png",e.href="https://afonsomatelias.github.io/assets/bouer/img/short.png"})).appendTo(V.head),this},o.prototype.set=function(e,t){return void 0===t&&(t=this.data),s(e)?s(t)&&null==t?(n.error('Invalid targetObject value, expected an "Object Literal" and got "'+typeof t+'".'),e):(U.transform({data:e,context:this}),y(Object.keys(e),(function(n){var o,i;M.once("AfterGet",(function(t){t.onemit=function(e){return o=e},r.descriptor(e,n).get()})),M.once("AfterGet",(function(e){e.onemit=function(e){return i=e};var o=r.descriptor(t,n);o&&o.get()})),r.transfer(t,e,n),i&&o&&(y(i.watches,(function(e){-1===o.watches.indexOf(e)&&o.watches.push(e)})),o.notify())})),t):(n.error('Invalid inputData value, expected an "Object Literal" and got "'+typeof e+'".'),t)},o.prototype.toJsObj=function(e,t,n){return F.htmlToJsObj(e,t,n)},o.prototype.watch=function(e,t,n){return void 0===n&&(n=this.data),new S(this).get("Binder").onPropertyChange(e,t,n||this.data)},o.prototype.react=function(e){return new S(this).get("Binder").onPropertyInScopeChange(e)},o.prototype.on=function(e,t,n){return new S(this).get("EventHandler").on({eventName:e,callback:t,attachedNode:(n||{}).attachedNode,modifiers:(n||{}).modifiers,context:this})},o.prototype.off=function(e,t,n){return new S(this).get("EventHandler").off({eventName:e,callback:t,attachedNode:n})},o.prototype.unbind=function(e,t,n){return new S(this).get("Binder").remove(e,n,t)},o.prototype.emit=function(e,t){var n=t||{};return new S(this).get("EventHandler").emit({eventName:e,attachedNode:n.element,init:n.init,once:n.once})},o.prototype.lazy=function(e,t){var n,r=this;t=a(t)?500:t;var o=arguments[2];return function(){var i=[].slice.call(arguments),a=o&&!n,s=function(){n=null,o||e.apply(r,i)};clearTimeout(n),n=setTimeout(s,t),a&&e.apply(r,i)}},o.prototype.compile=function(e){return new S(this).get("Compiler").compile({el:e.el,data:e.data,context:e.context,onDone:e.onDone})},o.prototype.destroy=function(){var e=this.el,t=new S(this),n=t.get("EventHandler").$events,r=(n.destroyed||[]).concat(n["component:destroyed"]||[]);this.emit("destroyed",{element:this.el}),y(r,(function(e){return e.emit({once:!0})})),n.destroyed=[],n["component:destroyed"]=[],"BODY"==e.tagName?e.innerHTML="":V.contains(e)&&e.parentElement.removeChild(e),this.isDestroyed=!0,this.isInitialized=!1,t.clear()},o}(q);export{J as Component,L as Extend,U as Reactive,$ as Watch,ne as default};