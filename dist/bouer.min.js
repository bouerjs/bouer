/*!
 * Bouer.js v3.1.0
 * Copyright Easy.js 2018-2020 | 2021-2023 Afonso Matumona
 * Released under the MIT License.
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).Bouer=t()}(this,(function(){"use strict";var e,t,n=(e="[Bouer]",{log:function(t){console.log.apply(null,[e].concat(Error(t)))},error:function(t){console.error.apply(null,[e].concat(Error(t)))},warn:function(t){console.warn.apply(null,[e].concat(Error(t)))},info:function(t){console.info.apply(null,[e].concat(Error(t)))}}),r=function(){function e(){}return e.on=function(t,n){return d(this.events[t])&&(this.events[t]=[]),this.events[t].push(n),{eventName:t,callback:n,off:function(){return e.off(t,n)}}},e.off=function(e,t){var n=this.events[e]||[];return n.splice(n.indexOf(t),1),!0},e.once=function(t,r){var o={},i=e.on(t,(function(e){o.onemit&&o.onemit(e)}));try{r(o)}catch(e){n.error(L(e))}finally{e.off(t,i.callback)}},e.emit=function(e,t){try{w(this.events[e]||[],(function(e){return e(t)}))}catch(e){n.error(L(e))}},e.events={},e}(),o={set:function(e,t,n){return Object.defineProperty(e,t,n)},descriptor:function(e,t){return Object.getOwnPropertyDescriptor(e,t)},transfer:function(e,t,n){var r=this.descriptor(t,n);n in e||(e[n]=void 0),this.set(e,n,r)}},i=function(e,t,n){var r=this;this.destroy=function(){var e=r.descriptor.watches.indexOf(r);-1!==e&&r.descriptor.watches.splice(e,1),(r.onDestroy||function(){})()},this.descriptor=e,this.property=e.propName,this.callback=t,n&&(this.node=n.node,this.onDestroy=n.onDestroy)},a=function(){function e(t){var i=this;this._IRT_=!0,this.watches=[],this.computed=function(){if(!i.isComputed)return{get:function(){},set:function(e){}};var e=i.fnComputed.call(i.context);if(d(e))throw new Error("Invalid value used as return in “function $computed(){...}”.");var t=f(e)||v(e);return{get:t&&"get"in e?e.get:function(){return e},set:t&&"set"in e?e.set:void 0}},this.get=function(){var e=i.computed().get;r.emit("BeforeGet",i),i.propValue=i.isComputed?R(e.call(i.context)):i.propValue;var t=i.propValue;return r.emit("AfterGet",i),t},this.set=function(t){if(!(i.propValue===t||Number.isNaN(i.propValue)&&Number.isNaN(t))){var o=i.computed().set;if(i.isComputed&&o)R(o.call(i.context,t));else if(i.isComputed&&d(o))return;if(i.propValueOld=i.propValue,r.emit("BeforeSet",i),f(t)||Array.isArray(t)){if(typeof i.propValue!=typeof t)return n.error("Cannot set “"+typeof t+"” in “"+i.propName+"” property.");if(Array.isArray(t)){e.transform({data:t,descriptor:i,context:i.context});var a=i.propValue;a.splice(0,a.length),a.push.apply(a,t)}else f(t)&&(t instanceof Node?i.propValue=t:(e.transform({data:t,context:i.context}),d(i.propValue)?i.propValue=t:T(t,i.propValue)))}else i.propValue=t;r.emit("AfterSet",i),i.notify()}},this.propName=t.propName,this.propSource=t.srcObject,this.context=t.context,this.baseDescriptor=o.descriptor(this.propSource,this.propName),this.propValue=this.baseDescriptor.value,this.isComputed="function"==typeof this.propValue&&"$computed"===this.propValue.name,this.isComputed&&(this.fnComputed=this.propValue,this.propValue=void 0),"function"!=typeof this.propValue||this.isComputed||(this.propValue=this.propValue.bind(this.context))}return e.prototype.notify=function(){var e=this;w(this.watches,(function(t){return t.callback.call(e.context,e.propValue,e.propValueOld)}))},e.prototype.onChange=function(e,t){var n=new i(this,e,{node:t});return this.watches.push(n),n},e.transform=function(t){var r=t.context,i=function(t,a,s,u,c){if(Array.isArray(t)){if(null==u)return n.warn("Cannot transform this array to a reactive one because no reactive object was provided"),t;if(-1!==a.indexOf(t))return t;a.push(t);var l=t,d={};Object.setPrototypeOf(l,Object.create(Array.prototype));var p=Object.getPrototypeOf(l);return w(["push","pop","unshift","shift","splice"],(function(e){d[e]=l[e].bind(l),p[e]=function(){var t=l.slice(),n=[].slice.call(arguments);switch(e){case"push":case"unshift":w(C(n),(function(e){(f(e)||Array.isArray(e))&&i(e,a,s)}))}var o=d[e].apply(l,n);return w(u.watches,(function(o){return o.callback.call(r,l,t,{method:e,args:n})})),o}})),l}return f(t)?(-1!==a.indexOf(t)||(a.push(t),w(c||Object.keys(t),(function(n){var u=t;if("value"in o.descriptor(t,n)){var c=u[n];if(!(c instanceof Object&&(c._IRT_||c instanceof Node))){var l=new e({propName:n,srcObject:t,context:r});o.set(t,n,l),Array.isArray(c)?(i(c,a,s,l),w(c,(function(e){return i(e,a,s)}))):f(c)&&i(c,a,s)}}})),a.splice(a.indexOf(t),1),s.push(t)),t):t};return i(t.data,[],[],t.descriptor)},e}(),s={skip:"e-skip",build:"e-build",array:"e-array",if:"e-if",elseif:"e-else-if",else:"e-else",show:"e-show",req:"e-req",for:"e-for",data:"data",def:"e-def",wait:"wait-data",text:"e-text",bind:"e-bind",property:"e-",skeleton:"e-skeleton",route:"route-view",href:":href",entry:"e-entry",on:"on:",silent:"--s",slot:"slot",ref:"ref",put:"e-put",builtInEvents:{add:"add",compile:"compile",request:"request",response:"response",fail:"fail",done:"done"},check:function(e,t){return g(e.nodeName,t)},isConstant:function(e){var t=this;return-1!==Object.keys(this).map((function(e){return t[e]})).indexOf(e)}},u=(t=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n={};return w(e,(function(e){d(e)||w(Object.keys(e),(function(t){o.transfer(n,e,t)}))})),n},{obj:t,mixin:function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=t.apply({},n);return w(Object.keys(i),(function(t){var n=t in e;if(o.transfer(e,i,t),n){var r=e;r[t]=r[t]}})),e},array:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=[];return w(e,(function(e){if(!d(e))return Array.isArray(e)?void w(Object.keys(e),(function(t){var r=e[t];d(r)||(Array.isArray(r)?[].push.apply(n,r):n.push(r))})):n.push(e)})),n}});function c(e,t){if(!e)return Promise.reject(new Error("Invalid Url"));var n=function(e,n){var r=(t||{})[e];return r||n},r=n("headers",{}),o=n("method","get"),i=n("body",void 0),a=n("body",(function(e){})),s=function(e){if(!(!z.documentMode||e.match(/^(get|post)$/i)&&B.XMLHttpRequest))return new B.ActiveXObject("Microsoft.XMLHTTP");if(B.XMLHttpRequest)return new B.XMLHttpRequest;throw new Error("This browser does not support XMLHttpRequest.")}(o);return new Promise((function(t,n){var u=function(t,n,r,o,i){t({url:e,ok:n,status:r,statusText:o.statusText||"",headers:o.getAllResponseHeaders(),json:function(){return Promise.resolve(JSON.stringify(i))},text:function(){return Promise.resolve(i)}})};s.open(o,e,!0),w(Object.keys(r),(function(e){s.setRequestHeader(e,r[e])})),s.onload=function(){var n="response"in s?s.response:s.responseText,r=1223===s.status?204:s.status;0===r&&(r=n?200:"file"===_(e).protocol?404:0),u(t,r>=200&&r<400,r,s,n)},s.onerror=function(){u(n,!1,s.status,s,"")},s.onabort=function(){u(n,!1,s.status,s,"")},s.ontimeout=function(){u(n,!1,s.status,s,"")},a(s),s.send(i)}))}function l(e,t,n){for(var r="01234567890ABCDEFGHIJKLMNOPQRSTUVWXYZ",o="",i=!1,a=0;a<(e||8);a++){var s=Math.floor(Math.random()*r.length);o+=i?x(r[s]):r[s],i=!i}return(t||"")+o+(n||"")}function d(e){return void 0===e||null==e}function f(e){return"object"==typeof e&&"[object Object]"===String(e)}function p(e){return void 0!==e&&"string"==typeof e}function h(e){return!e||!f(e)||0===Object.keys(e).length}function v(e){return"function"==typeof e}function m(e,t){return d(e)?t:e}function b(e){if(d(e))throw new Error("Application is not initialized");return e}function y(e){return e?e.trim():e}function g(e,t){return e.substring(0,t.length)===t}function x(e){return e.toLowerCase()}function N(e){return function(e){return"string"==typeof e||"number"==typeof e||"symbol"==typeof e||"boolean"==typeof e}(e)?String(e):f(e)||Array.isArray(e)?JSON.stringify(e):v(e.toString)?e.toString():String(e)}function w(e,t,n){for(var r=0;r<e.length;r++)t.call(n,e[r],r)}function k(e,t,n){for(var r=[],o=0;o<e.length;o++)t.call(n,e[o],o)&&r.push(e[o]);return r}function C(e){return e?[].slice.call(e):[]}function A(e,t){var n=z.createComment(t||" e ");return n.id=e||l(8),n}function E(e,t){return O(e,t)}function O(e,t){var n=z.createElement(e);v(t)&&t(n,z);var r={appendTo:function(e){return e.appendChild(n),r},build:function(){return n},child:function(){return n.children[0]},children:function(){return[].slice.call(n.childNodes)}};return r}function I(e){var t=e.parentNode;t&&t.removeChild(e)}function T(e,t){w(Object.keys(e),(function(n){var r=e[n];if(n in t)return f(r)?T(r,t[n]):t[n]=r;o.transfer(t,e,n)}))}function _(e){var t=e;"documentMode"in z&&(G.setAttribute("href",t),t=G.href),G.href=t;var n=G.hostname;!("[::1]"===G.hostname)&&n.indexOf(":")>-1&&(n="["+n+"]");var r={href:G.href,baseURI:G.baseURI,protocol:G.protocol?G.protocol.replace(/:$/,""):"",host:G.host,search:G.search?G.search.replace(/^\?/,""):"",hash:G.hash?G.hash.replace(/^#/,""):"",hostname:n,port:G.port,pathname:"/"===G.pathname.charAt(0)?G.pathname:"/"+G.pathname,origin:""};return r.origin=r.protocol+"://"+r.host,r}function j(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=e.split(/\/\//),o=r.length>1?r[0]+"//":"",i=(""===o?r[0]:r[1]).split(/\//),a=[];return w(i,(function(e){return y(e)?a.push(e):null})),w(t,(function(e){return w(e.split(/\//),(function(e){return y(e)?a.push(e):null}))})),o+a.join("/")}function V(e,t){var n=function(e){return"../"===e.substring(0,3)},r=function(e){var t=e.split("/");return/\.html$|\.css$|\.js$/gi.test(e)&&t.pop(),{relative:t.join("/"),parts:t}};if("./"===t.substring(0,2))return r(e).relative+t.substring(1);if(!n(t))return t;var o=r(e).parts;return o.push(function e(t){return n(t)?(o.pop(),e(t.substring(3))):t}(t)),o.join("/")}function L(e){return e?(e.stack="",e):"Unknown Error"}function R(e){return e instanceof Promise&&e.then((function(e){v(e)?e.call():e instanceof Promise&&e.then()})).catch((function(e){return n.error(e)})),e}function S(e,t,n){void 0===n&&(n=!1);var r=null;if(!e)return null;for(var o=0;o<t.length&&!(r=e.attributes[t[o]]);o++);return!d(r)&&n&&e.removeAttribute(r.name),r}function D(e,t){var n=e.attributes||[];return n.getNamedItem(t)||C(n).find((function(e){return e.name===t||g(e.name,t+":")}))}function q(e){return e.root||e}function M(e,t,i){return d(i)&&(i=e.data),f(t)?f(i)&&null==i?(n.error('Invalid targetObject value, expected an "Object Literal" and got "'+typeof i+'".'),t):(a.transform({data:t,context:e}),w(Object.keys(t),(function(e){var n,a;r.once("AfterGet",(function(r){r.onemit=function(e){return n=e},o.descriptor(t,e).get()})),r.once("AfterGet",(function(t){t.onemit=function(e){return a=e};var n=o.descriptor(i,e);n&&v(n.get)&&n.get()})),o.transfer(i,t,e),a&&n&&(w(a.watches,(function(e){-1===n.watches.indexOf(e)&&n.watches.push(e)})),n.notify())})),i):(n.error('Invalid inputData value, expected an "Object Literal" and got "'+typeof t+'".'),i)}function P(e,t,r){var o=void 0;if(e instanceof HTMLElement)o=e;else if("string"==typeof e)try{var i=z.querySelector(e);if(!i)return n.error('Element with "'+e+'" selector Not Found.'),null;o=i}catch(e){return n.error(L(e)),null}if(d(o))throw n.error('Invalid element provided at app.toJsObj(> "'+e+'" <).');var a=((t=t||{}).names||"[name]").replace(/\[|\]/g,"").split(","),c=(t.values||"[value]").replace(/\[|\]/g,"").split(","),l=function(e,t){return t in e?e[t]:e.getAttribute(t)||e.innerText},p=function(e){var t={},n={BUTTON:!0},o={checkbox:!0,radio:!0};return function e(i){var d=S(i,a);if(d){var f=d.value;if(!0===n[i.tagName])return;if(i instanceof HTMLInputElement&&!0===o[i.type]&&!1===i.checked)return;var p=t[f],h=i.hasAttribute(s.array),m=function(e){var t=void 0;return c.find((function(n){return!!(t=l(e,n))})),t}(i);""!==m&&(t[f]=h?p?u.array(p,m):[m]:p?u.array(p,m):m),v(r)&&R(r(t,f,m,i))}w(C(i.children),(function(t){S(t,[s.build])||e(t)}))}(e),t},m=p(o);return w(C(o.querySelectorAll("[".concat(s.build,"]"))),(function(e){var t=l(e,s.build),n=e.hasAttribute(s.array),o=p(e);(function(e){if(h(e))return!1;for(var t=!1,n=Object.keys(e),r=0;r<n.length;r++)if(!d(n[r])){t=!0;break}return t})(o)&&function t(i,a){var s=i.split("."),c=s[0];s.shift();var l=a[c];return d(l)&&(a[c]={}),0===s.length?(n?f(l)&&!h(l)?a[c]=[u.obj(l,o)]:Array.isArray(l)?l.push(o):a[c]=[o]:d(l)?a[c]=o:a[c]=u.obj(l,o),void(v(r)&&R(r(a,c,o,e)))):Array.isArray(l)?w(l,(function(e){t(s.join("."),e)})):void t(s.join("."),a[c])}(t,m)})),m}var $,H,U,B=window,z=document,G=O("a").build(),F=function(){function e(e,t){this.delimiters=[],this.bouer=e,this.delimiters=t}return e.prototype.add=function(e){this.delimiters.push(e)},e.prototype.remove=function(e){var t=this.delimiters.findIndex((function(t){return t.name===e}));this.delimiters.splice(t,1)},e.prototype.run=function(e){var t=this;if(d(e)||""===y(e))return[];var n=null,r=function(e,r){for(var o=0;o<t.delimiters.length;o++){var i=t.delimiters[o],a=e.match(RegExp(i.delimiter.open+"([\\S\\s]*?)"+i.delimiter.close,r||""));if(a)return n=i,a}},o=r(e,"g");return o?o.map((function(e){var t=r(e);return{field:t[0],expression:y(t[1]),delimiter:n}})):[]},e.prototype.shorthand=function(e){if(d(e)||""===y(e))return null;var t=e.match(new RegExp("{([\\w{$,-}]*?)}"));return t?{field:t[0],expression:y(t[1])}:null},e}(),X=function(){function e(e){this.bouer=e}return e.prototype.execRaw=function(e,t){try{Function(e).call(t||this.bouer)}catch(e){n.error(L(e))}},e.prototype.exec=function(t){var n=u.obj(this.bouer.globalData||{},t.aditional||{},t.data||{},{$root:this.bouer.data,$mixin:u.mixin});return delete t.data,t.data=n,e.run(t)},e.run=function(e){try{return Function("var d$=arguments[0].d;return(function(){var r$;with(d$){"+(!1===e.isReturn?"":"r$=")+e.code+"}return r$;}).apply(this, arguments[0].a)").call(e.context,{d:e.data||{},a:e.args})}catch(e){n.error(L(e))}},e}(),W=function(){function e(e){var t=this;this._IRT_=!0,this.backgroudColor="",this.waveColor="",this.defaultBackgroudColor="#E2E2E2",this.defaultWaveColor="#ffffff5d",this.identifier="bouer",this.numberOfItems=1,this.reset(),this.bouer=e,this.style=O("style",(function(e){return e.id=t.identifier})).build()}return e.prototype.reset=function(){this.backgroudColor=this.defaultBackgroudColor,this.waveColor=this.defaultWaveColor},e.prototype.init=function(e){var t=this;if(this.style&&(z.getElementById(this.identifier)||z.head.appendChild(this.style),this.style.sheet)){for(var n=0;n<this.style.sheet.cssRules.length;n++)this.style.sheet.deleteRule(n);e?(this.backgroudColor=e.background||this.defaultBackgroudColor,this.waveColor=e.wave||this.defaultWaveColor,this.numberOfItems=e.numberOfItems||this.numberOfItems):this.reset();var r=s.skeleton,o=this.backgroudColor,i=["[--s]{ display: none!important; }","["+r+"] { background-color: "+o+"!important; position: relative!important; overflow: hidden; }","["+r+"],["+r+"] * { color: transparent!important; }","["+r+"]::before, ["+r+']::after { content: ""; position: absolute; top: 0; left: 0; right: 0; bottom: 0; display: block; }',"["+r+"]::before { background-color: "+o+"!important; z-index: 1;}","["+r+"]::after { transform: translateX(-100%); background: linear-gradient(90deg, transparent, "+this.waveColor+", transparent); animation: loading 1.5s infinite; z-index: 2; }","@keyframes loading { 100% { transform: translateX(100%); } }","@-webkit-keyframes loading { 100% { transform: translateX(100%); } }"];w(i,(function(e){return t.style.sheet.insertRule(e)})),this.style.innerText=i.join(" ")}},e.prototype.insertItems=function(e){var t=e.parentElement||e.parentNode,n=e;if(null!=t&&!(this.numberOfItems<=1)&&(n.hasAttribute("e-skeleton")||!d(n.querySelector("[e-skeleton]")))){var r=l(6);e.setAttribute("skeleton-clone-code",r);for(var o=0;o<this.numberOfItems-1;o++){var i=e.cloneNode(!0);i.setAttribute("skeleton-cloned",r),t.insertBefore(i,e)}}},e.prototype.clearItems=function(e){var t=e,n=e.parentElement||e.parentNode,r=t.getAttribute("skeleton-clone-code");r&&(t.removeAttribute("skeleton-clone-code"),w([].slice.call(n.querySelectorAll('[skeleton-cloned="'+r+'"]')),(function(e){n.removeChild(e)})))},e.prototype.clear=function(e){e=e?'="'+e+'"':"",w(C(b(this.bouer.el).querySelectorAll("["+s.skeleton+e+"]")),(function(e){return e.removeAttribute(s.skeleton)}))},e}(),J=($=1,H=new WeakMap,U=function(e,t){var n=[],r={__ctor0:e};return w(t||[],(function(e,t){var o="__arg"+t;r[o]=e,n.push(o)})),X.run({code:"new __ctor0("+n.join(",")+")",data:r,isReturn:!0})},{app:function(e){return{add:function(t,n,r){return function(e,t,n,r){if(e.isDestroyed)throw new Error("Application already disposed.");H.has(e)||H.set(e,new WeakMap),H.get(e).set(t,{clazz:t,isSingleton:m(r,!1),args:n})}(e,t,n,r)},resolve:function(t){return function(e,t){if(e.isDestroyed)throw new Error("Application already disposed.");var n=H.get(e);if(!n)return null;var r=n.get(t);return null==r?null:r.isSingleton?r.instance?r.instance:r.instance=U(t,r.args):U(t,r.args)}(e,t)},clear:function(){!function(e){H.delete(e)}(e)}}},new:function(e,t){return e instanceof ue?(n.error("Cannot create an instance of Bouer using IoC"),null):U(e,t)},newId:function(){return $++}}),Y={run:function(e,t){var n=setInterval((function(){e((function(){return clearInterval(n)}))}),t||10)}},K=function(e){var t=this;this._IRT_=!0,this.middlewareConfigContainer={},this.run=function(e,n){var r=t.middlewareConfigContainer[e];if(!r)return(n.default||function(){}).call(t.bouer);for(var o=0,i=r[o],a=function(){var e=!1,a=i[n.type];if(a?n.action((function(n,r){Promise.resolve(a.call(t.bouer,n,(function(){e=!0}))).then((function(t){e||r.success(t),r.done()})).catch((function(t){e||r.fail(t),r.done()}))})):(n.default||function(){})(),0==e)return"break";i=r[++o]};null!=i&&"break"!==a(););},this.subscribe=function(e,n){t.middlewareConfigContainer[e]||(t.middlewareConfigContainer[e]=[]);var r={};n.call(t.bouer,(function(e){return r.onBind=e}),(function(e){return r.onUpdate=e})),t.middlewareConfigContainer[e].push(r)},this.has=function(e){var n=t.middlewareConfigContainer[e];return!!n&&n.length>0},this.bouer=e},Q=function(){function e(e){this.binds=[],this.DEFAULT_BINDER_PROPERTIES={text:"value",number:"valueAsNumber",checkbox:"checked",radio:"value",contenteditable:"textContent"},this.BindingDirection={fromInputToData:"fromInputToData",fromDataToInput:"fromDataToInput"},this.bouer=e,this.evaluator=J.app(e).resolve(X),this.cleanup()}return e.prototype.create=function(e){var t=this,o=e.node,i=e.data,a=e.fields,c=e.isReplaceProperty,l=e.context,p=y(m(o.nodeValue,"")),h=o.nodeName,v=o.ownerElement||o.parentNode,b=J.app(this.bouer).resolve(K),g=e.onUpdate||function(e,t){},x={node:o,data:i,nodeName:h,nodeValue:p,fields:a,parent:v,value:""},k=function(e){b.run(h,{type:e,action:function(e){e({binder:x,detail:{}},{success:function(){},fail:function(){},done:function(){}})}})};return h.substring(0,s.bind.length)===s.bind?function(){var a="",c=v.type;v.hasAttribute("contenteditable")&&(c="contenteditable"),c=c||v.localName,a=s.bind===h?t.DEFAULT_BINDER_PROPERTIES[c]||"value":h.split(":")[1];var m,b,A=v instanceof HTMLSelectElement,E=A&&!0===v.multiple,O=S(v,[":value"],!0),I=O?O.value:"'"+v.value+"'",T=y(p),_={fromDataToInput:function(e){if(!Array.isArray(m)){if("radio"===c)return v.checked=v[a]==e;var n=f(e)?N(e):d(e)?"":e;if(n===v[a])return;return v[a]=n}if(b=b||t.evaluator.exec({data:i,code:I,context:l}),E)return w(C(v.options),(function(e){e.selected=-1!==m.indexOf(y(e.value))}));if(-1===m.indexOf(b))switch(typeof v[a]){case"boolean":v[a]=!1;break;case"number":v[a]=0;break;default:v[a]=""}},fromInputToData:function(e){if(!Array.isArray(m))return t.evaluator.exec({isReturn:!1,context:l,data:u.obj(i,{$vl:e}),code:T+"=$vl"});if(b=b||t.evaluator.exec({data:i,code:I,context:l}),E){var n=[];return w(C(v.options),(function(e){!0===e.selected&&n.push(y(e.value))})),m.splice(0,m.length),m.push.apply(m,n)}e?m.push(b):m.splice(m.indexOf(b),1)}},j=function(e,t){return A&&!E&&Array.isArray(m)&&!I?n.error("Since it's a <select> array binding, it expects the “multiple” attribute in order to bind the multiple values."):E||!Array.isArray(m)||I?_[e](t):n.error('Since it\'s an array binding it expects a model but it has not been defined, provide a model as it follows: value="String-Model" or :value="Object-Model".')};r.once("AfterGet",(function(n){var r=function(){return t.evaluator.exec({data:i,code:T,context:l})};n.onemit=function(n){t.binds.push({isConnected:e.isConnected,watch:n.onChange((function(){k("onUpdate");var e=r();j(t.BindingDirection.fromDataToInput,e),g(e,o)}),o)})},m=r()})),k("onBind"),j(t.BindingDirection.fromDataToInput,m);var V=["input","propertychange","change"];return-1===V.indexOf(v.localName)&&V.push(v.localName),w(V,(function(e){"change"===e&&"select"!==v.localName||v.addEventListener(e,(function(){j(t.BindingDirection.fromInputToData,v[a])}),!1)})),v.removeAttribute(o.nodeName),x}():function(){var n=o;h.substring(0,s.property.length)===s.property&&d(c)&&(x.nodeName=h.substring(s.property.length),v.setAttribute(x.nodeName,p),n=v.attributes[x.nodeName],v.removeAttribute(o.nodeName));var u=function(){var e=x.nodeValue,r=!1;if(w(a,(function(n){var a=n.delimiter;a&&"html"===a.name&&(r=!0);var s=t.evaluator.exec({data:i,code:n.expression,context:l});s=d(s)?"":s,e=e.replace(n.field,N(s)),a&&"function"==typeof a.onUpdate&&(e=a.onUpdate(e,o,i))})),x.value=e,!r)return n.nodeValue=e;var s=O("div",(function(t){return t.innerHTML=e})).children();v.innerHTML="",w(s,(function(e){v.appendChild(e),J.app(t.bouer).resolve(re).compile({el:e,data:i,context:l})}),t)};return r.once("AfterGet",(function(n){n.onemit=function(n){t.binds.push({isConnected:e.isConnected,watch:n.onChange((function(){k("onUpdate"),u(),g(n.propValue,o)}),o)})},u()})),k("onBind"),x.node=n,x}()},e.prototype.remove=function(e,t,n){this.binds=k(this.binds,(function(r){var o=r.watch.node;return(o.ownerElement||o.parentElement)!==e||(d(t)?r.watch.destroy():o.nodeName!==t||n!==r.watch.property&&!d(n)||r.watch.destroy())}))},e.prototype.onPropertyChange=function(e,t,n){var o;return r.once("AfterGet",(function(r){r.onemit=function(e){return o=e.onChange(t)},n[e]})),o},e.prototype.onPropertyInScopeChange=function(e){var t=this,n=[];return r.once("AfterGet",(function(r){r.onemit=function(r){if(!n.find((function(e){return e.property===r.propName&&e.descriptor.propSource===r.propSource}))){var o=!1;n.push(r.onChange((function(){o||(o=!0,e.call(t.bouer,t.bouer),o=!1)})))}},e.call(t.bouer,t.bouer)})),{watches:n,destroy:function(){return w(n,(function(e){return e.destroy()}))}}},e.prototype.cleanup=function(){var e=this;0!=m(this.bouer.config.autoUnbind,!0)&&Y.run((function(){e.binds=k(e.binds,(function(e){if(e.isConnected())return!0;e.watch.destroy()}))}))},e}(),Z=function(){function e(e,t){this._IRT_=!0,this.$events={},this.input=O("input").build(),this.bouer=e,this.evaluator=J.app(e).resolve(X),this.cleanup()}return e.prototype.compile=function(e,t,r){var o=this,i=e.ownerElement||e.parentNode,a=e.nodeName;if(d(i))return n.error("Invalid ParentElement of “"+a+"”");var u=y(m(e.nodeValue,"")),c=a.substring(s.on.length).split("."),l=c[0];if(c.shift(),""===u)return n.error("Expected an expression in the “"+a+"” and got an <empty string>.");i.removeAttribute(a);var f=function(e){var i={prevent:"preventDefault",stop:"stopPropagation"};w(c,(function(t){var n=i[t];e[n]&&e[n]()}));var a=[e],s=o.evaluator.exec({data:t,code:u,args:a,aditional:{event:e},context:r});if(v(s))try{s.apply(r,a)}catch(e){n.error(L(e))}},p={},h=["capture","once","passive"];w(c,(function(e){e=e.toLocaleLowerCase(),-1!==h.indexOf(e)&&(p[e]=!0)})),"on"+l in this.input?i.addEventListener(l,f,p):this.on({eventName:l,callback:f,modifiers:p,context:r,attachedNode:i})},e.prototype.on=function(e){var t=this,n=this,r=e.eventName,o=e.callback,i=e.context,a=e.attachedNode,s=e.modifiers,u=function(e){return o.apply(i||t.bouer,[e])},c={eventName:r,attachedNode:a,modifiers:s,callback:u,destroy:function(){return n.off({callback:u,attachedNode:a,eventName:r})},emit:function(e){return t.emit({eventName:r,attachedNode:a,init:(e||{}).init,once:(e||{}).once})}};return this.$events[r]||(this.$events[r]=[]),this.$events[r].push(c),c},e.prototype.off=function(e){var t=e.eventName,n=e.callback,r=e.attachedNode;this.$events[t]&&(this.$events[t]=k(this.$events[t],(function(e){var o=e.eventName===t&&n==e.callback;return(!r||e.attachedNode!==r||!o)&&(e.eventName===t&&e.attachedNode===r&&d(n)?void 0:!o)})))},e.prototype.emit=function(e){var t=this,n=e.eventName,r=e.init,o=e.once,i=e.attachedNode,a=this.$events[n];if(a){var s=function(e,t){e.addEventListener(n,t,{once:!0}),e.dispatchEvent(new CustomEvent(n,r))};this.$events[n]=k(a,(function(e){var a=e.attachedNode,u=m((e.modifiers||{}).once,!1)||m(o,!1);return i?a!==i||(s(a,e.callback),!u):a?(s(a,e.callback),!u):(R(e.callback.call(t.bouer,new CustomEvent(n,r))),!u)}))}},e.prototype.cleanup=function(){var e=this;0!=m(this.bouer.config.autoOffEvent,!0)&&Y.run((function(){w(Object.keys(e.$events),(function(t){e.$events[t]=k(e.$events[t],(function(e){return!1===(e.modifiers||{}).autodestroy||(!e.attachedNode||(!!e.attachedNode.isConnected||void 0))}))}))}))},e}(),ee=function(){function e(e){this._IRT_=!0,this.routeView=null,this.activeAnchors=[],this.base=null,this.bouer=e}return e.prototype.init=function(){var e=this;if(this.routeView=b(this.bouer.el).querySelector("[route-view]"),!d(this.routeView)){this.routeView.removeAttribute("route-view"),this.base="/";var t=z.head.querySelector("base");if(t){var r=t.attributes.getNamedItem("href");if(!r)return n.error('The href="/" attribute is required in base element.');this.base=r.value}this.defaultPage&&this.navigate(z.location.href),B.addEventListener("popstate",(function(t){t.preventDefault(),e.navigate((t.state||{}).url||location.href,{setURL:!1})}))}},e.prototype.navigate=function(e,t){var r=this;if(this.routeView){if(d(e))return n.log("Invalid url provided to the navigation method.");var o=_(e=y(e)),i=m(this.bouer.config.usehash,!0),a=(i?o.hash:o.pathname).split("?")[0];t=t||{},"/"===a[a.length-1]&&(a=a.substring(0,a.length-1));var s=this.toPage(a);if(this.clear(),s&&(s||!e.endsWith(".html"))){var u=E(s.name,(function(e){e.setAttribute("data",f(t.data)?JSON.stringify(t.data):"$data")})).appendTo(this.routeView).build();z.title=s.title||z.title,m(t.setURL,!0)&&this.pushState(o.href,z.title);var c=j(o.baseURI,i?"#":"",s.route);J.app(this.bouer).resolve(ae).order(u,this.bouer.data,(function(){r.markActiveAnchorsWithRoute(c)}))}}},e.prototype.pushState=function(e,t){e=_(e).href,z.location.href!==e&&B.history.pushState({url:e,title:t},t||"",e)},e.prototype.popState=function(e){d(e)&&(e=-1),B.history.go(e)},e.prototype.toPage=function(e){return""===e||"/"===e||e==="/"+j((this.base,"index.html"))?this.defaultPage:J.app(this.bouer).resolve(ae).find((function(t){if(!t.route)return!1;var n=t.route.replace(/{(.*?)}/gi,"[\\S\\s]{1,}");return!!Array.isArray(new RegExp("^"+n+"$","i").exec(e))}))||this.notFoundPage},e.prototype.markActiveAnchorsWithRoute=function(e){var t=this,n=this.bouer.config.activeClassName||"active-link",r=b(this.bouer.el),o=r.querySelectorAll("a");d(e)||(w(this.activeAnchors,(function(e){return e.classList.remove(n)})),w([].slice.call(r.querySelectorAll("a."+n)),(function(e){return e.classList.remove(n)})),this.activeAnchors=[],w(C(o),(function(r){r.href.split("?")[0]===e.split("?")[0]&&(r.classList.add(n),t.activeAnchors.push(r))})))},e.prototype.markActiveAnchor=function(e){var t=this.bouer.config.activeClassName||"active-link";d(e)||(w(this.activeAnchors,(function(e){return e.classList.remove(t)})),w([].slice.call(b(this.bouer.el).querySelectorAll("a."+t)),(function(e){return e.classList.remove(t)})),e.classList.add(t),this.activeAnchors=[e])},e.prototype.clear=function(){this.routeView.innerHTML=""},e.prototype.configure=function(e){return!0!==e.isDefault||d(this.defaultPage)?!0!==e.isNotFound||d(this.notFoundPage)?(!0===e.isDefault&&(this.defaultPage=e),void(!0===e.isNotFound&&(this.notFoundPage=e))):n.warn("There are multiple “NotFound Page” provided, check the “"+e.route+"” route."):n.warn("There are multiple “Default Page” provided, check the “"+e.route+"” route.")},e}(),te=function(){function e(){this._IRT_=!0,this.wait={},this.data={},this.req={}}return e.prototype.set=function(e,t,r){if("wait"===e)return n.warn("Only “get” is allowed for type of data");this[e][t]=r},e.prototype.get=function(e,t,n){var r=this[e][t];return!0===n&&this.unset(e,t),r},e.prototype.unset=function(e,t){delete this[e][t]},e}(),ne=function(){function e(e,t,n){this._IRT_=!0,this.$custom={},this.errorMsgEmptyNode=function(e){return"Expected an expression in “"+e.nodeName+"” and got an <empty string>."},this.errorMsgNodeValue=function(e){return"Expected an expression in “"+e.nodeName+"” and got “"+m(e.nodeValue,"")+"”."},this.compiler=t,this.context=n,this.bouer=t.bouer,this.$custom=e,this.evaluator=J.app(this.bouer).resolve(X),this.delimiter=J.app(this.bouer).resolve(F),this.binder=J.app(this.bouer).resolve(Q),this.eventHandler=J.app(this.bouer).resolve(Z)}return e.prototype.toOwnerNode=function(e){return e.ownerElement||e.parentNode},e.prototype.skip=function(e){e.nodeValue="true"},e.prototype.if=function(e,t){var o=this,i=this.toOwnerNode(e),a=i.parentElement;if(a){var c=[],l=A(),f=e.nodeName,p=function(){};if(f!==s.elseif&&f!==s.else){var h=i,v=[],b=function(){if(null==h)return"break";var e=S(h,["e-if","e-else-if","e-else"]);if(!e)return"break";var i=c[0];return"e-if"===e.name&&i&&e.name===i.attr.name?"break":"e-else"!==e.nodeName&&""===y(m(e.nodeValue,""))?{value:n.error(g.errorMsgEmptyNode(e))}:0!==g.delimiter.run(m(e.nodeValue,"")).length?{value:n.error(g.errorMsgNodeValue(e))}:(c.push({attr:e,node:h}),"e-else"===e.nodeName?(h.removeAttribute(e.nodeName),"break"):(r.once("AfterGet",(function(n){n.onemit=function(t){-1===v.findIndex((function(e){return e.descriptor.propName==t.propName}))&&v.push({attr:e,descriptor:t})},o.evaluator.exec({data:t,code:e.value,context:o.context})})),void h.removeAttribute(e.nodeName)))},g=this;do{var x=b();if("object"==typeof x)return x.value;if("break"===x)break}while(h=h.nextElementSibling);var N=function(){return!d(u.array(c.map((function(e){return e.node})),l).find((function(e){return e.isConnected})))};w(v,(function(e){o.binder.binds.push({isConnected:N,watch:e.descriptor.onChange((function(){return p()}),e.attr)})})),(p=function(){w(c,(function(e){var t=q(e.node);t.parentElement&&(l.isConnected?a.removeChild(t):a.replaceChild(l,t))}));var e=c.map((function(e,t){var n=e.attr.value;switch(e.attr.name){case s.if:return"if("+n+"){ __cb("+t+"); }";case s.elseif:return"else if("+n+"){ __cb("+t+"); }";case s.else:return"else{ __cb("+t+"); }"}})).join(" ");o.evaluator.exec({data:t,isReturn:!1,code:e,context:o.context,aditional:{__cb:function(e){var n=q(c[e].node);a.replaceChild(n,l),o.compiler.compile({el:n,data:t,context:o.context,isConnected:N})}}})})()}}},e.prototype.show=function(e,t){var r=this,o=this.toOwnerNode(e),i=y(m(e.nodeValue,"")),a=function(e){};if(""===i)return n.error(this.errorMsgEmptyNode(e));if(0!==this.delimiter.run(i).length)return n.error(this.errorMsgNodeValue(e));var s=this.binder.create({data:t,node:e,isConnected:function(){return o.isConnected},fields:[{expression:i,field:i}],context:this.context,onUpdate:function(){return a(o)}});(a=function(e){e.style.display=r.evaluator.exec({data:t,code:i,context:r.context})?"":"none"})(o),o.removeAttribute(s.node.nodeName)},e.prototype.for=function(e,t){var o=this,i=this.toOwnerNode(e),c=i.parentElement;if(c&&!i.hasAttribute("skeleton-cloned")){var l=A(),p=e.nodeName,h=y(m(e.nodeValue,"")),v=[],b=!1,g=!1,k=function(){};if(""===h)return n.error(this.errorMsgEmptyNode(e));if(!h.includes(" of ")&&!h.includes(" in "))return n.error("Expected a valid “for” expression in “"+p+"” and got “"+h+'”.\nValid: e-for="item of items".');var C=this.delimiter.run(h);0!==C.length&&this.binder.create({node:e,data:t,fields:C,isReplaceProperty:!0,context:this.context,isConnected:function(){return l.isConnected},onUpdate:function(){return k()}}),i.removeAttribute(p);var E=i.cloneNode(!0);c.replaceChild(l,i);var O=function(n){var r=function(n,r){var i=(V=V||T(y(m(e.nodeValue,"")))).leftHandParts,s=V.sourceValue,c=V.isForOf,l=u.obj(t),d=i[0],f=i[1]||"_index_or_value",p=i[2]||"_for_in_index";return l[d]=n,l[f]=c?r:s[n],l[p]=r,a.transform({data:l,context:o.context})}(n.item,n.index),i=c.insertBefore(E.cloneNode(!0),n.reference||l);return o.compiler.compile({el:i,data:r,context:o.context,onDone:function(e){return o.eventHandler.emit({eventName:s.builtInEvents.add,attachedNode:e,once:!0})}}),v.splice(n.index,0,{el:i,data:r}),i},T=function(e){var n=e.split("|").map((function(e){return y(e)})),r=n[0].replace(/\(|\)/g,"");n.shift();var i=" of ",a=r.split(i);a.length>1||(a=r.split(i=" in "));var s=a[0],u=a[1],c=s.split(",").map((function(e){return y(e)})),l="of"===y(i)?u:"Object.keys("+u+")";return{filters:n,type:i,leftHand:s,rightHand:u,sourceValue:o.evaluator.exec({data:t,code:u,context:o.context}),leftHandParts:c,iterableExpression:l,isForOf:"of"===y(i)}},_=function(e,r){var i=r.split(":").map((function(e){return y(e)}));if(1!=i.length)return function(e,r){b=!0;var i=r[2],a=r[1];if(d(a)||""===a)return n.error("Invalid where-value in “"+p+"” with “"+h+"” expression."),e;if("function"==typeof(a=o.evaluator.exec({data:t,code:a,context:o.context})))e=a(e);else{if((d(i)||""===i)&&f(e[0]||""))return n.error("Invalid where-keys in “"+p+"” with “"+h+"” expression, at least one where-key to be provided when using list of object."),e;var s=[];w(e,(function(e){var t=!1;if(d(i))t=N(e).toLowerCase().includes(a.toLowerCase());else for(var n=i.split(",").map((function(e){return y(e)})),r=0;r<n.length;r++){var u=n[r];if(N(o.evaluator.exec({data:e,code:u,context:o.context})).toLowerCase().includes(a.toLowerCase())){t=!0;break}}t&&s.push(e)})),e=s}return e}(e,i);n.error("Invalid “"+p+"” where expression “"+h+"”, at least a where-value and where-keys, or a filter-function must be provided")},j=r.on("AfterGet",(function(t){o.binder.binds.push({isConnected:function(){return l.isConnected},watch:t.onChange((function(t,n,r){return function(t){if(b||g)return k();var n=(t=t||{}).method,r=t.args,o=v,i=function(){return Promise.resolve((function(t){var n=(V=V||T(y(m(e.nodeValue,"")))).leftHandParts[1]||"_index_or_value";"_index_or_value"!==n&&w(t,(function(e,t){e.data[n]=t}))})).then((function(e){return e(v)}))};switch(n){case"pop":case"shift":if(d(c=o[n]()))return;if(I(q(c.el)),"pop"===n)return;return i();case"splice":var a=r[0],s=r[1];w(o.splice(a,s),(function(e){return I(q(e.el))}));var u=(V=V||T(y(m(e.nodeValue,"")))).leftHandParts[1]||"_index_or_value";if(w([].slice.call(r,2),(function(e){a++,O({reference:q(v[a].el)||l,index:a,item:e})})),"_index_or_value"===u)return;for(;a<v.length;a++){var c;"number"==typeof(c=v[a].data)[u]&&(c[u]=a)}return;case"push":case"unshift":var f="unshift"==n,p=(v[0]||{}).el||l,h=f?0:o.length,x=f?q(p):l;return w([].slice.call(r),(function(e){var t=O({index:h++,reference:x,item:e});f&&(x=t)})),void(f&&i());default:return k()}}(r)}),e)})})),V=T(h),L=V.filters,R=function(e){return L.filter((function(t){return t.substring(0,e.length)===e}))},S=R("where");w(S,(function(e){return _(V.sourceValue,e)})),j.off(),(k=function(){var r=(V=V||T(y(m(e.nodeValue,"")))).iterableExpression,i=R("order");w(v,(function(e){var t=q(e.el);t.parentElement&&c.removeChild(t)})),v=[],o.evaluator.exec({data:t,isReturn:!1,context:o.context,code:"var __e = __each, __fl = __filters, __f = __for; __f(__fl("+r+"), function($$itm, $$idx) { __e($$itm, $$idx); })",aditional:{__for:w,__each:function(e,t){return O({index:t,item:e})},__filters:function(e){var t=u.array(e);w(S,(function(e){return t=_(t,e)}));var r=function(e){var r=e.split(":").map((function(e){return y(e)}));1==r.length?n.error("Invalid “"+p+"” order  expression “"+h+"”, at least the order type must be provided"):t=function(e,t,r){return g=!0,t||(t="asc"),e.sort((function(e,o){var i=function(e,r){if(d(e)||d(r))return 0;switch(x(t)){case"asc":return e?1:-1;case"desc":return r?-1:1;default:return n.log("The “"+t+"” order type is invalid: “"+h+"”. Available types are: “asc”  for order ascendent and “desc” for order descendent."),0}};return r?i(e[r]>o[r],o[r]<e[r]):i(e>o,o<e)}))}(t,r[1],r[2])};return w(i,(function(e){return r(e)})),t}}}),V=null})()}},e.prototype.def=function(e,t){var i=this.toOwnerNode(e),a=y(m(e.nodeValue,""));if(""===a)return n.error(this.errorMsgEmptyNode(e));if(0!==this.delimiter.run(a).length)return n.error(this.errorMsgNodeValue(e));var s={},u=r.on("AfterGet",(function(e){e.propName in s||(s[e.propName]=void 0),o.set(s,e.propName,e)})),c=this.evaluator.exec({data:t,code:a,context:this.context});if(!f(c))return n.error("Expected a valid Object Literal expression in “"+e.nodeName+"” and got “"+a+"”.");w(Object.keys(c),(function(e){e in s||(s[e]=c[e])})),r.off("AfterGet",u.callback),this.bouer.set(s,t),i.removeAttribute(e.nodeName)},e.prototype.text=function(e){var t=this.toOwnerNode(e),r=y(m(e.nodeValue,""));if(""===r)return n.error(this.errorMsgEmptyNode(e));t.textContent=r,t.removeAttribute(e.nodeName)},e.prototype.bind=function(e,t){var r=this.toOwnerNode(e),o=y(m(e.nodeValue,""));return""===o?n.error(this.errorMsgEmptyNode(e)):0!==this.delimiter.run(o).length?n.error(this.errorMsgNodeValue(e)):(this.binder.create({node:e,isConnected:function(){return r.isConnected},fields:[{field:o,expression:o}],context:this.context,data:t}),void r.removeAttribute(e.nodeName))},e.prototype.property=function(e,t){var r=this,o=this.toOwnerNode(e),i=y(m(e.nodeValue,"")),a=function(e){},u=function(e){return"Invalid value, expected an Object/Object Literal in “"+e.nodeName+"” and got “"+m(e.nodeValue,"")+"”."};if(""===i)return n.error(u(e));if(0===this.delimiter.run(i).length){var c=this.evaluator.exec({data:t,code:i,context:this.context});if(!f(c))return n.error(u(e));this.binder.create({data:t,node:e,isReplaceProperty:!1,context:this.context,fields:[{expression:i,field:i}],isConnected:function(){return o.isConnected},onUpdate:function(){return a(r.evaluator.exec({data:t,code:i,context:r.context}))}}),o.removeAttribute(e.nodeName),(a=function(t){var n=e.nodeName.substring(s.property.length),r=o.attributes[n];if(r||(o.setAttribute(n,""),r=o.attributes[n]),w(Object.keys(t),(function(e){if(!t[e])return r.value=y(r.value.replace(e,""));r.value=r.value.includes(e)?r.value:y(r.value+" "+e)})),""===r.value)return o.removeAttribute(n)})(c)}},e.prototype.data=function(e,t){var i=this.toOwnerNode(e),s=y(m(e.nodeValue,""));if(0!==this.delimiter.run(s).length)return n.error("The “data” attribute cannot contain delimiter.");i.removeAttribute(e.nodeName);var c={},l=u.obj(t,{$data:t}),d=r.on("AfterGet",(function(e){e.propName in c||(c[e.propName]=void 0),o.set(c,e.propName,e)}));if(""===s)c=u.obj(this.bouer.data);else{var p=this.evaluator.exec({data:l,code:s,context:this.context});if(!f(p))return n.error("Expected a valid Object Literal expression in “"+e.nodeName+"” and got “"+s+"”.");w(Object.keys(p),(function(e){e in c||(c[e]=p[e])}))}r.off("AfterGet",d.callback);var h=e.nodeName.split(":")[1];return h&&(h=h.replace(/\[|\]/g,""),J.app(this.bouer).resolve(te).set("data",h,c)),a.transform({context:this.context,data:c}),this.compiler.compile({data:c,el:i,context:this.context})},e.prototype.href=function(e,t){var r=this,o=this.toOwnerNode(e),i=y(m(e.nodeValue,""));if(""===i)return n.error(this.errorMsgEmptyNode(e));o.removeAttribute(e.nodeName);var a=j(m(this.bouer.config.usehash,!0)?"#":"",i);o.setAttribute("href",a);var s=o.attributes.href,u=this.delimiter.run(i);0!==u.length&&this.binder.create({data:t,node:s,isConnected:function(){return o.isConnected},context:this.context,fields:u}),o.addEventListener("click",(function(e){e.preventDefault(),J.app(r.bouer).resolve(ee).navigate(s.value)}),!1)},e.prototype.entry=function(e,t){var r=this.toOwnerNode(e),o=y(m(e.nodeValue,""));return""===o?n.error(this.errorMsgEmptyNode(e)):0!==this.delimiter.run(o).length?n.error(this.errorMsgNodeValue(e)):(r.removeAttribute(e.nodeName),void J.app(this.bouer).resolve(ae).prepare([{name:o,template:r.outerHTML,data:t}]))},e.prototype.put=function(e,t){var r=this,o=this.toOwnerNode(e),i=y(m(e.nodeValue,"")),a=function(){};return""===i?n.error(this.errorMsgEmptyNode(e)+" Direct <empty string> injection value is not allowed."):0!==this.delimiter.run(i).length?n.error("Expected an expression with no delimiter in “"+e.nodeName+"” and got “"+m(e.nodeValue,"")+"”."):(this.binder.create({data:t,node:e,isConnected:function(){return o.isConnected},fields:[{expression:i,field:i}],context:this.context,isReplaceProperty:!1,onUpdate:function(){return a()}}),o.removeAttribute(e.nodeName),void(a=function(){if(o.innerHTML="",""!==(i=y(m(e.nodeValue,"")))){var n=E(i).appendTo(o).build();J.app(r.bouer).resolve(ae).order(n,t)}})())},e.prototype.req=function(e,t){var r=this,i=this.toOwnerNode(e),c=this.toOwnerNode(i),d=e.nodeName,f=y(m(e.nodeValue,""));if(!f.includes(" of ")&&!f.includes(" as "))return n.error("Expected a valid “for” expression in “"+d+"” and got “"+f+'”.\nValid: e-req="item of url".');if(!i.hasAttribute("skeleton-cloned")){var p,h=this.delimiter.run(f),v={},b=(e.nodeName.split(":")[1]||"").replace(/\[|\]/g,""),g=A(void 0,"request-"+(b||l(6))),x=function(){},N={node:e,data:t,nodeName:d,nodeValue:f,fields:h,parent:i,value:f};c.insertBefore(g,i);var w=J.app(this.bouer).resolve(W);f.includes(" of ")&&w.insertItems(i),0!==h.length&&(N=this.binder.create({data:t,node:e,fields:h,context:this.context,isReplaceProperty:!1,isConnected:function(){return g.isConnected},onUpdate:function(){return x()}})),i.removeAttribute(e.nodeName),o.set(i,"isConnected",{get:function(){return g.isConnected}});var k=function(e){var n=i.attributes.getNamedItem(s.on+e);return n&&r.eventHandler.compile(n,t,r.context),{emit:function(t){r.eventHandler.emit({attachedNode:i,eventName:e,init:{detail:t}})}}},C=function(e){var t=e.split("|").map((function(e){return y(e)})),n=t.shift().replace(/\(|\)/g,""),r=" of ",o=n.split(r);return o.length>1||(o=n.split(r=" as ")),{filters:t,type:y(r),expression:y(n),variables:y(o[0]),path:y(o[1])}},E=function(e,t){return e?"data"in e?"of"!==t||Array.isArray(e.data)?"as"!==t||"object"==typeof e.data||(n.error('Using e-req="... “as” ..." the response must be a list of items, and got “'+typeof e.data+"”."),!1):(n.error('Using e-req="... “of” ..." the response must be a list of items, and got “'+typeof e.data+"”."),!1):(n.error("the return must contain the “data” property. Example: { data: {} | [] }"),!1):(n.error("the return must be an object containing “data” property. Example: { data: {} | [] }"),!1)},O=J.app(this.bouer).resolve(K);if(!O.has("req"))return n.error("There is no “req” middleware provided for the “e-req” directive requests.");var I=function(e){return{binder:N,detail:{requestType:e.type,requestPath:e.path,reponseData:v}}};(p=function(){var c=C(y(e.nodeValue||""));k(s.builtInEvents.request).emit(),O.run("req",{type:"onBind",action:function(e){e(I(c),{success:function(e){!function(e){var d;if(E(e,c.type)){if(a.transform({context:r.context,data:e}),b&&J.app(r.bouer).resolve(te).set("req",b,e),k(s.builtInEvents.response).emit({response:e}),"data"in v)return v.data=e.data;if(v.data=void 0,o.transfer(v,e,"data"),"as"===c.type){var f=y(c.variables.split(",")[0].replace(/\(|\)/g,""));return f in t?n.error("There is already a “"+f+"” defined in the current scope. Provide another variable name in order to continue."):(t[f]=e.data,r.compiler.compile({el:i,data:a.transform({context:r.context,data:t}),context:r.context,isConnected:function(){return g.isConnected}}))}if("of"===c.type){w.clearItems(i);var p=l(8,"res"),h=c.expression.replace(c.path,p),m=u.obj(((d={})[p]=e.data,d),t);i.setAttribute(s.for,u.array([h],c.filters).join(" | ")),o.set(m,p,o.descriptor(e,"data")),r.compiler.compile({el:i,data:m,context:r.context,isConnected:function(){return g.isConnected}})}}}(e)},fail:function(e){return k(s.builtInEvents.fail).emit({error:e})},done:function(){return k(s.builtInEvents.done).emit()}})}})})(),x=function(){var t=C(y(e.nodeValue||""));O.run("req",{type:"onUpdate",default:function(){return p()},action:function(e){e(I(t),{success:function(e){E(e,t.type)&&(v.data=e.data)},fail:function(e){return k(s.builtInEvents.fail).emit({error:e})},done:function(){return k(s.builtInEvents.done).emit()}})}})}}},e.prototype.wait=function(e){var t=this,r=this.toOwnerNode(e),o=y(m(e.nodeValue,""));if(""===o)return n.error(this.errorMsgEmptyNode(e));if(0!==this.delimiter.run(o).length)return n.error(this.errorMsgNodeValue(e));r.removeAttribute(e.nodeName);var i=J.app(this.bouer).resolve(te),s=i.wait[o];if(s){if(s.nodes.push(r),!s.data)return;w(s.nodes,(function(e){t.compiler.compile({el:e,context:s.context,data:a.transform({context:s.context,data:s.data})})})),m(s.once,!1)&&delete i.wait[o]}return i.wait[o]={nodes:[r],context:this.context}},e.prototype.custom=function(e,t){var n=this.toOwnerNode(e),r=e.nodeName,o=y(m(e.nodeValue,"")),i=this.delimiter.run(o),a=this.$custom[r],s=this.binder.create({data:t,node:e,fields:i,isReplaceProperty:!1,context:this.context,isConnected:function(){return n.isConnected},onUpdate:function(){"function"==typeof a.onUpdate&&a.onUpdate(e,s)}});m(a.removable,!0)&&n.removeAttribute(r);var u=r.split(".");u.shift();var c=(r.split(":")[1]||"").split(".")[0];return s.modifiers=u,s.argument=c,"function"==typeof a.onBind&&m(a.onBind(e,s),!1)},e.prototype.skeleton=function(e){var t;if(""===y(m(e.nodeValue,""))){var n=this.toOwnerNode(e);n.removeAttribute(e.nodeName);var r=n.getAttribute("skeleton-clone-code");r&&(n.removeAttribute("skeleton-clone-code"),w([].slice.call(null===(t=this.bouer.el)||void 0===t?void 0:t.querySelectorAll('[="'+r+'"]')),(function(e){(e.parentElement||e.parentNode).removeChild(e)})))}},e}(),re=function(){function e(e,t){this._IRT_=!0,this.NODES_TO_IGNORE_IN_COMPILATION={SCRIPT:1,"#comment":8},this.bouer=e,this.directives=null!=t?t:{},this.binder=J.app(e).resolve(Q),this.delimiter=J.app(e).resolve(F),this.eventHandler=J.app(e).resolve(Z),this.component=J.app(e).resolve(ae)}return e.prototype.compile=function(e){var t=this,r=e.el,o=e.context||this.bouer,i=e.data||this.bouer.data,a=e.isConnected||function(){return r.isConnected},u=J.app(this.bouer).resolve(ee);if(!r)return n.error("Invalid element provided to the compiler.");if(!this.analize(r.outerHTML))return r;var c=new ne(this.directives||{},this,o),l=function(r,i){if(!(r.nodeName in t.NODES_TO_IGNORE_IN_COMPILATION)){if(r instanceof Element){if(s.skip in r.attributes)return c.skip(r);if((r.localName.toLowerCase()===s.slot||r.tagName.toLowerCase()===s.slot)&&e.componentSlot){var d=e.componentSlot,f=function(e,t){var n=function(e){var n=e.cloneNode(!0);t.parentNode.insertBefore(n,t),l(n,i)};"SLOTCONTAINER"===e.nodeName||"SLOT"===e.nodeName?w(C(e.childNodes),(function(e){return n(e)})):n(e),t.parentNode.removeChild(t)};if(r.hasAttribute("default")){if(0==d.childNodes.length)return;return f(d,r)}if(r.hasAttribute("name")){var h=r.attributes.getNamedItem("name");return function e(t){var n=t.getAttribute(s.slot);return n&&n===h.value?(t.removeAttribute(s.slot),f(t,r)):0===t.children.length?null:void w(C(t.children),(function(t){e(t)}))}(d)}}if(s.def in r.attributes&&c.def(D(r,s.def),i),s.entry in r.attributes&&c.entry(D(r,s.entry),i),s.wait in r.attributes)return c.wait(D(r,s.wait));if(s.for in r.attributes)return c.for(D(r,s.for),i);if(t.component.check(r.localName))return t.component.order(r,i);if(s.if in r.attributes)return c.if(D(r,s.if),i);(s.elseif in r.attributes||s.else in r.attributes)&&n.warn("The “"+s.elseif+"” or “"+s.else+"” requires an element with “"+s.if+"” above."),s.show in r.attributes&&c.show(D(r,s.show),i);var v;if(v=D(r,s.req))return c.req(v,i);var m;if(m=D(r,s.data))return c.data(m,i);if(s.put in r.attributes)return c.put(D(r,s.put),i);if(u.routeView===r)return;w(C(r.attributes),(function(e){l(e,i)}))}if(s.check(r,s.href))return c.href(r,i);if(s.check(r,s.text))return c.text(r);if(s.check(r,s.bind))return c.bind(r,i);if(!Object.keys(c.$custom).find((function(e){return s.check(r,e)}))||!c.custom(r,i)){if(s.check(r,s.property)&&!s.isConstant(r.nodeName)&&c.property(r,i),s.check(r,s.skeleton)&&c.skeleton(r),s.check(r,s.on))return t.eventHandler.compile(r,i,o);var b,y;if(b=t.delimiter.shorthand(r.nodeName)){var g=r.ownerElement||r.parentNode,x=z.createAttribute("e-"+b.expression);return x.value="{{ "+b.expression+" }}",g.attributes.setNamedItem(x),g.attributes.removeNamedItem(b.field),t.binder.create({node:x,isConnected:a,fields:[{expression:b.expression,field:x.value}],context:o,data:i})}p(r.nodeValue)&&(y=t.delimiter.run(r.nodeValue))&&0!==y.length&&t.binder.create({node:r,isConnected:a,fields:y,context:o,data:i}),w(C(r.childNodes),(function(e){return l(e,i)}))}}};return l(r,i),r.hasAttribute&&r.hasAttribute(s.silent)&&r.removeAttribute(s.silent),v(e.onDone)&&R(e.onDone.call(o,r)),this.eventHandler.emit({eventName:s.builtInEvents.compile,attachedNode:r,once:!0,init:{detail:i}}),r},e.prototype.analize=function(e){for(var t="<([a-z0-9-_]{1,}|/[a-z0-9-_]{1,})((.|\n|\r)*?)>",r=e.replace(/<script((.|\n|\r)*?)<\/script>/gm,"<script><\/script>").replace(/<style((.|\n|\r)*?)<\/style>/gm,"<style></style>").replace(/<pre((.|\n|\r)*?)<\/pre>/gm,"<pre></pre>").replace(/<code((.|\n|\r)*?)<\/code>/gm,"<code></code>").replace(/<svg((.|\n|\r)*?)<\/svg>/gm,"<svg></svg>").replace(/<!--((.|\n|\r)*?)-->/gm,"").replace(/&nbsp;/g,"&#160;"),o=[],i=[],a=0,s="",u=!0,c=r.match(new RegExp(t,"ig"))||[],l=new Set(["area","base","br","col","embed","hr","img","input","link","meta","param","source","track","wbr"]),d=0;d<c.length;d++){var f=c[d],p=x(f.match(new RegExp(t,"i"))[1]),h="/"===f[1];if(o.push({tag:f,ident:h?a:++a}),!l.has(p))if(i.push({name:p,tag:f}),h){if(a--,!u)continue;var v=i.pop(),m=i.pop();m&&m.name===v.name.substring(1)||(a++,s="Syntax Error: Unexpected token, the openning tag `"+(m.tag||"NoToken")+"` does not match with closing tag: `"+v.tag+"`:\n\n",u=!1,o.push(o[o.length-1]),o[o.length-2]={tag:"<====================== Line Error ======================",ident:a+1})}else;}return u||n.error(s+o.map((function(e,t){return t+1+"."+Array(e.ident).fill("  ").join("")+e.tag})).join("\n")),u},e}(),oe=function(){function e(e){this._IRT_=!0,this.url=e||z.location.href}return e.prototype.params=function(e){var t=this,n={};if(e&&p(e)){var r=this.url.split("?")[0].split("/").reverse();""===r[0]&&r.shift(),w(e.split("/").reverse(),(function(e,t){var o=RegExp("{([\\S\\s]*?)}","ig").exec(e);Array.isArray(o)&&(n[o[1]]=r[t])}))}return function(){var e=t.url.split("?")[1];if(!e)return t;w(e.split("&"),(function(e){var t=e.split("=");n[t[0]]=(t[1]||"").split("#")[0]}))}(),n},e.prototype.add=function(e){var t=[];w(Object.keys(e),(function(n){t.push(n+"="+e[n])}));var n=t.join("&");return this.url.includes("?")?"&"+n:"?"+n},e.prototype.remove=function(e){return e},e}(),ie=function(){function e(e){this._IRT_=!0,this.isDestroyed=!1,this.children=[],this.assets=[],this.events=[];var t=void 0,n=void 0,r=void 0;p(e)?n=e:(t=e.name,n=e.path,r=e.data,Object.assign(this,e)),this.name=t||"",this.path=n||"",this.data=a.transform({context:this,data:r||{}});var i={value:e.template};o.set(this,"template",{get:function(){return i.value},set:function(e){return i.value=e}})}return e.prototype.export=function(e){var t=this;return f(e)?w(Object.keys(e),(function(n){t.data[n]=e[n],o.transfer(t.data,e,n)})):n.log('Invalid object for component.export(...), only "Object Literal" is allowed.')},e.prototype.destroy=function(){var e=this;if(!this.el)return!1;if(!(this.isDestroyed&&this.bouer&&this.bouer.isDestroyed)){this.keepAlive||(this.isDestroyed=!0),this.emit("beforeDestroy");var t=this.el.parentElement;t&&t.removeChild(this.el),this.emit("destroyed"),w(this.events,(function(t){return e.off(t.eventName,t.callback)})),this.events=[];var n=J.app(this.bouer).resolve(ae).activeComponents;n.splice(n.indexOf(this),1)}},e.prototype.params=function(){return(new oe).params(this.route)},e.prototype.emit=function(e,t){J.app(this.bouer).resolve(Z).emit({eventName:e,attachedNode:this.el,init:t})},e.prototype.on=function(e,t){var r=new Set(["created","beforeMount","mounted","beforeLoad","loaded","beforeDestroy","destroyed"]);new Set(["requested","blocked","failed"]).has(e)&&n.warn("The “"+e+"” Event is called before the component is mounted, to be dispatchedit needs to be on registration object: { "+e+": function(){ ... }, ... }.");var o=J.app(this.bouer).resolve(Z).on({eventName:e,callback:t,attachedNode:this.el,context:this,modifiers:{once:r.has(e),autodestroy:!1}});return this.events.push(o),o},e.prototype.off=function(e,t){J.app(this.bouer).resolve(Z).off({eventName:e,callback:t,attachedNode:this.el}),this.events=k(this.events,(function(n){return!(n.eventName==e&&n.callback==t)}))},e.prototype.addAssets=function(e){var t=[],r={js:"script",css:"link",scss:"link",sass:"link",less:"link",styl:"link",style:"link"},o=function(e,t){var r=!(!e&&!y(e));return r||n.error("Invalid asset “src”, in assets["+t+"].src"),r},i=function(e,t){var o=e.split("."),i=r[x(o[o.length-1])];return i||n.error("Couldn't find out what type of asset it is, provide the “type” explicitly at assets["+t+"].type")};w(e,(function(e,n){var a="",s="",u=!0;if("string"==typeof e){if(!o(e,n))return;s=i(y(a=e.replace(/\.less|\.s[ac]ss|\.styl/i,".css")),n)}else{if(!o(y(a=e.src.replace(/\.less|\.s[ac]ss\.styl/i,".css")),n))return;if(e.type)s=r[x(e.type)]||e.type;else if(!(s=i(a,n)))return;u=m(e.scoped,!0)}if("."!==a[0]){var c=_(a),l=c.baseURI===a.substring(0,c.baseURI.length);a=j(l?c.origin:c.baseURI,c.pathname)}var d=E(s,(function(e){switch(m(u,!0)&&e.setAttribute("scoped","true"),x(s)){case"script":default:e.setAttribute("src",a);break;case"link":e.setAttribute("href",a),e.setAttribute("rel","stylesheet"),e.setAttribute("type","text/css")}})).build();t.push(d)})),this.assets.push.apply(this.assets,t)},e.prototype.set=function(e,t){var n=this,r=M(this,e,t);return w(Object.keys(e),(function(t){return o.transfer(n,e,t)})),r},e}(),ae=function(){function e(e){this._IRT_=!0,this.requests={},this.components={},this.stylesController={},this.activeComponents=[],this.bouer=e,this.delimiter=J.app(e).resolve(F),this.eventHandler=J.app(e).resolve(Z),this.evaluator=J.app(e).resolve(X)}return e.prototype.check=function(e){return e in this.components},e.prototype.request=function(e,t){var r=this;if(!d(this.requests[e]))return this.requests[e].push(t);this.requests[e]=[t];var o=_(e),i=null!=z.head.querySelector("base");c(j(o.baseURI===e.substring(0,o.baseURI.length)?o.origin:o.baseURI,o.pathname),{headers:{"Content-Type":"text/plain"}}).then((function(e){if(!e.ok)throw new Error(e.statusText);return e.text()})).then((function(t){w(r.requests[e],(function(n){n.success(t,e)})),delete r.requests[e]})).catch((function(t){i||n.warn('It seems like you are not using the “<base href="/base/components/path/" />” element, try to add as the first child into “<head></head>” element.'),w(r.requests[e],(function(n){return n.fail(t,e)})),delete r.requests[e]}))},e.prototype.prepare=function(e,t){var r=this;w(e,(function(e,o){var i=e.prototype instanceof ie,a=e;if(i&&((a=J.app(r.bouer).resolve(e)||J.new(e)).clazz=e),(!a.path||d(a.path))&&(!a.template||d(a.template)))return n.warn("The component at options.components["+o+"] has not valid “path” or “template” property defined, then it was ignored.");if(d(a.name)||!a.name){if(!a.path||d(a.path))return n.warn("Provide a “name” to component at options.components["+o+"] position.");var s=a.path.toLowerCase().split("/"),u=s[s.length-1].replace(".html","");r.components[u]&&(u=x(l(8,u+"-component-"))),a.name=u}a.name=a.name.toLowerCase();var c="";if(r.components[a.name])return n.warn("The component name “"+a.name+"” is already define, try changing the name.");d(t)||(c=t.route||""),d(a.route)||(a.route="/"+j(c,a.route)),Array.isArray(a.children)&&r.prepare(a.children,a),J.app(r.bouer).resolve(ee).configure(r.components[a.name]=a);var f=function(e){e&&r.request(a.path,{success:function(e){a.template=e},fail:function(e){n.error(L(e))}})};return d(a.prefetch)?(a.prefetch=m(r.bouer.config.prefetch,!0))?f(a.path):void 0:!0===a.prefetch?f(a.path):void 0}))},e.prototype.order=function(e,t,r){var o=this,i=x(e.nodeName),a=this.components[i];if(!a)return n.error("No component with name “"+i+"” registered.");var s=function(){var s=function(e){var t,n,r;return e instanceof ie&&e.clazz?t=J.app(o.bouer).resolve(e.clazz)||J.new(e.clazz):e instanceof ie?(n=e,r=Object.create(n.__proto__),w(Object.keys(n),(function(e){return r[e]=n[e]})),t=r):t=new ie(e),!0===t.keepAlive&&(o.components[i]=t),t.template=e.template,t.bouer=o.bouer,t};return a.template?o.insert(e,s(a),t,r):a.path?(o.addEvent("requested",e,a,o.bouer).emit(),void o.request(a.path,{success:function(n){a.template=n,o.insert(e,s(a),t,r)},fail:function(t){n.error("Failed to request <"+i+"/> component with path “"+a.path+"”."),n.error(L(t)),o.addEvent("failed",e,a,o.bouer).emit()}})):n.error("Expected a valid value in `path` or `template` got invalid value at “"+i+"” component.")};if(a.restrictions&&a.restrictions.length>0){var u=[],c=a.restrictions.map((function(e){var t=e.call(o.bouer,a);return!1===t?u.push(e):t instanceof Promise&&t.then((function(t){!1===t&&u.push(e)})).catch((function(){return u.push(e)})),t})),l=this.addEvent("blocked",e,a,this.bouer),d=function(){return l.emit({detail:{component:a.name,message:"Component “"+a.name+"” blocked by restriction(s)",blocks:u}})};return Promise.all(c).then((function(e){e.every((function(e){return 1==e}))?s():d()})).catch((function(){return d()}))}return s()},e.prototype.find=function(e){for(var t=Object.keys(this.components),n=0;n<t.length;n++){var r=this.components[t[n]];if(e(r))return r}return null},e.prototype.addEvent=function(e,t,n,r){var o=this,i=n[e];"function"==typeof i&&this.eventHandler.on({eventName:e,callback:function(e){return i.call(r||n,e)},attachedNode:t,modifiers:{once:!0},context:r||n});return{emit:function(r){return function(r){o.eventHandler.emit({attachedNode:t,once:!0,eventName:e,init:r}),o.eventHandler.emit({eventName:"component:"+e,init:{detail:{component:n}},once:!0})}(r)}}},e.prototype.insert=function(e,t,i,p){var h=this,b=x(e.nodeName),y=e.parentElement,g=J.app(this.bouer).resolve(re);if(y){if(d(t.template))return n.error("The <"+b+"/> component is not ready yet to be inserted.");if(g.analize(t.template)){this.activeComponents.includes(t)||this.activeComponents.push(t);var N=E("SlotContainer",(function(t){t.innerHTML=e.innerHTML,e.innerHTML=""})).build();(!1===(e.hasAttribute("keep-alive")||m(t.keepAlive,!1))||d(t.el))&&O("body",(function(e){return e.innerHTML=t.template,w([].slice.call(e.children),(function(n){-1!==["SCRIPT","LINK","STYLE"].indexOf(n.nodeName)&&(t.assets.push(n),e.removeChild(n))})),0===e.children.length?n.error("The component <"+b+"/> seems to be empty or it has not a root element. Example: <div></div>, to be included."):e.children.length>1?n.error("The component <"+b+"/> seems to have multiple root element, it must have only one root."):void(t.el=e.children[0])}));var A=t.el;if(!d(A)){var I=k(Object.keys(t),(function(e){return!(e in t)}));I.length>0&&a.transform({context:t,data:t,keys:I});var T=this.addEvent("created",A,t),_=this.addEvent("beforeMount",A,t),j=this.addEvent("mounted",A,t),S=this.addEvent("beforeLoad",A,t),q=this.addEvent("loaded",A,t);this.addEvent("beforeDestroy",A,t),this.addEvent("destroyed",A,t);var M=k(t.assets,(function(e){return"SCRIPT"===e.nodeName})),P=t.init;v(P)&&R(P.call(t));var $=function(c){try{D(e,s.data)||e.setAttribute("data","$data");var d;if(d=D(e,s.data)){var E=d;0!==h.delimiter.run(E.value).length?n.error("The “data” attribute cannot contain delimiter, source element: <"+b+"/>."):function(e){var s={},c=u.obj(i,{$data:i}),l=r.on("AfterGet",(function(e){e.propName in s||(s[e.propName]=void 0),o.set(s,e.propName,e)}));if(""===e.value)s=u.obj(h.bouer.data);else{var d=J.app(h.bouer).resolve(X).exec({data:c,code:e.value,context:h.bouer});f(d)?w(Object.keys(d),(function(e){e in s||(s[e]=d[e])})):n.error("Expected a valid Object Literal expression in “"+e.nodeName+"” and got “"+e.value+"”.")}l.off(),s=a.transform({context:t,data:s}),w(Object.keys(s),(function(e){o.transfer(t.data,s,e)}))}(E),e.removeAttribute(E.name)}J.app(h.bouer).resolve(X).execRaw(c||"",t),T.emit(),w(C(e.attributes),(function(t){if(e.removeAttribute(t.name),"class"===t.nodeName)return e.classList.forEach((function(e){A.classList.add(e)}));A.attributes.setNamedItem(t)})),_.emit(),"root"in e||o.set(e,"root",{value:A}),y.replaceChild(A,e),j.emit();var O={};A.classList.forEach((function(e){return O[e]=!0}));var I=function(e,t){var n=[],r="STYLE"===e.nodeName;if(e.sheet){for(var o=e.sheet.cssRules,i=0;i<o.length;i++){var a=o.item(i);if(a){var s=a,u=s.selectorText;if(u){var c=u.split(" ")[0],l="."==c[0]||"#"==c[0]?c.substring(1):c,d=O[l]?"":" ",f="."+t,p=s.selectorText.split(" ");p[0]===x(A.tagName)&&p.shift(),s.selectorText=f+d+p.join(" ")}r&&n.push(s.cssText)}}r&&(e.innerText=n.join(" "))}},R=k(t.assets,(function(e){return"SCRIPT"!==e.nodeName})),M="component-style";if(w(R,(function(e){var n=e.cloneNode(!0);if(n instanceof HTMLLinkElement){var r="/"===t.path[0]?t.path.substring(1):t.path;n.href=V(r,n.getAttribute("href")||""),n.rel="stylesheet"}if(h.stylesController[b]){var o=h.stylesController[b];if(o.elements.indexOf(A)>-1)return;return o.elements.push(A),w(o.styles,(function(e){A.classList.add(e.getAttribute(M))}))}var i=l(7,"bouer-s");if(n.setAttribute(M,i),n instanceof HTMLLinkElement&&n.hasAttribute("scoped")&&(n.onload=function(e){return I(e.target,i)}),h.stylesController[b]={styles:[z.head.appendChild(n)],elements:[A]},n.hasAttribute("scoped"))return A.classList.add(i),n instanceof HTMLStyleElement?I(n,i):void 0})),S.emit(),g.compile({data:a.transform({context:t,data:t.data}),onDone:function(){v(p)&&p(t),q.emit()},componentSlot:N,context:t,el:A}),!1===m(h.bouer.config.autoComponentDestroy,!0))return;Y.run((function(e){if(!t.el.isConnected){if(h.bouer.isDestroyed)return e();t.destroy(),e();var n=h.stylesController[t.name];if(n){var r=n.elements.indexOf(t.el);n.elements.splice(r,1),n.elements.length>0||y.isConnected||(w(n.styles,(function(e){return w(C(z.head.children),(function(t){if(t===e)return z.head.removeChild(e)}))})),delete h.stylesController[t.name])}}}))}catch(e){n.error("Error in <"+b+"/> component."),n.error(L(e))}};if(0===M.length)return $();var H=[],U=[],B=[],G={};return w(M,(function(e){if(""==e.src||e.innerHTML)H.push(e.innerHTML);else{var n="/"===t.path[0]?t.path.substring(1):t.path;e.src=V(n,e.getAttribute("src")||""),B.push(e.src)}})),0==B.length?$(H.join("\n\n")):w(B,(function(e,t){G[e]=!0,c(e,{headers:{"Content-Type":"text/plain"}}).then((function(e){if(!e.ok)throw new Error(e.statusText);return e.text()})).then((function(n){if(delete G[e],U[t]=n,0===Object.keys(G).length)return $(u.array(U,H).join("\n\n"))})).catch((function(t){t.stack="",n.error("Error loading the <script src='"+e+"'><\/script> in <"+b+"/> component, remove it in order to be compiled."),n.log(t)}))}))}}}},e}(),se=function(){function e(){}return e.by=function(e,t){return k(J.app(e).resolve(ae).activeComponents,t)},e.byId=function(e,t){return k(J.app(e).resolve(ae).activeComponents,(function(e){return e.el&&q(e.el).id==t}))[0]},e.byName=function(e,t){return k(J.app(e).resolve(ae).activeComponents,(function(e){return e.name.toLowerCase()==(t||"").toLowerCase()}))},e}(),ue=function(){function e(e,t){var r=this;this._IRT_=!0,this.name="Bouer",this.version="3.1.0",this.__id__=J.newId(),this.refs={},this.isDestroyed=!1,this.isInitialized=!1;var i=this;this.options=t=t||{},this.config=t.config||{},this.deps=t.deps||{},w(Object.keys(this.deps),(function(e){var t=r.deps,n=t[e];t[e]="function"==typeof n?n.bind(r):n}));var u=t.delimiters||[];J.app(this).add(te,[this],!0),J.app(this).add(X,[this],!0),J.app(this).add(K,[this],!0),J.app(this).add(Q,[this],!0),J.app(this).add(Z,[this],!0),J.app(this).add(ae,[this],!0),J.app(this).add(W,[this],!0),J.app(this).add(ee,[this],!0),J.app(this).add(F,[this,u],!0),J.app(this).add(re,[this,t.directives],!0);var c=J.app(this).resolve(te),l=J.app(this).resolve(K),f=J.app(this).resolve(ae),p=J.app(this).resolve(re),h=J.app(this).resolve(W),v=J.app(this).resolve(F);"function"==typeof t.middleware&&t.middleware.call(i,l.subscribe,i),this.data=a.transform({data:t.data||{},context:i}),this.globalData=a.transform({data:t.globalData||{},context:i}),u.push.apply(u,[{name:"html",delimiter:{open:"{{:html ",close:"}}"}},{name:"common",delimiter:{open:"{{",close:"}}"}}]),this.$routing=J.app(this).resolve(ee),this.$delimiters={add:v.add,remove:v.remove,get:function(){return v.delimiters.slice()}},this.$data={get:function(e){return e?c.data[e]:null},set:function(e,t,o){return e in c.data?n.log("There is already a data stored with this key “"+e+"”."):(!0===m(o,!1)&&a.transform({context:i,data:t}),J.app(r).resolve(te).set("data",e,t))},unset:function(e){return delete c.data[e]}},this.$req={get:function(e){return e?c.req[e]:void 0},unset:function(e){return delete c.req[e]}},this.$wait={get:function(e){if(e){var t=c.wait[e];if(t)return m(t.once,!0)&&r.$wait.unset(e),t.data}},set:function(e,t,n){if(!(e in c.wait))return c.wait[e]={data:t,nodes:[],once:m(n,!1),context:i};var o=c.wait[e];o.data=t,w(o.nodes,(function(e){e&&p.compile({el:e,context:o.context,data:a.transform({context:o.context,data:o.data})})})),m(n,!1)&&r.$wait.unset(e)},unset:function(e){return delete c.wait[e]}},this.$skeleton={clear:function(e){return h.clear(e)},set:function(e){return h.init(e)}},this.$components={add:function(e){return f.prepare([e])},get:function(e){return f.components[e]},viewBy:function(e){return se.by(r,e)},viewByName:function(e){return se.byName(r,e)},viewById:function(e){return se.byId(r,e)}},o.set(this,"refs",{get:function(){var e={};return w(C(b(r.el).querySelectorAll("["+s.ref+"]")),(function(t){var r=y(t.attributes[s.ref].value)||t.name||"";return""===r?n.error("Expected an expression in “"+t.name+"” or at least “name” attribute to combine with “"+t.name+"”."):r in e?(n.warn("The key “"+r+"” in “"+t.name+"” is taken, choose another key."),n.warn(t)):void(e[r]=t)})),e}}),f.prepare(t.components||[]),d(e)||""===y(e)||this.init(e)}return e.create=function(t){return(t=t||{}).config=t.config||{},(t.config||{}).autoUnbind=!1,(t.config||{}).autoOffEvent=!1,(t.config||{}).autoComponentDestroy=!1,new e("",t)},e.toJsObj=function(e,t,n){return P(e,t,n)},e.prototype.init=function(e){var t=this;if(this.isInitialized)return this;if(d(e)||""===y(e))throw n.error(new Error("Invalid selector provided to the instance."));var r=this,o=z.querySelector(e);if(!(this.el=o))throw n.error(new SyntaxError("Element with selector “"+e+"” not found."));var i=this.options||{},a=J.app(this).resolve(Q),s=J.app(this).resolve(Z),u=J.app(this).resolve(ee),c=J.app(this).resolve(W),l=J.app(this).resolve(re);return w([i.beforeLoad,i.loaded,i.beforeDestroy,i.destroyed],(function(e){"function"==typeof e&&s.on({eventName:e.name,callback:e,attachedNode:o,modifiers:{once:!0},context:r})})),s.emit({eventName:"beforeLoad",attachedNode:o}),(i.config||{}).autoUnbind=!0,(i.config||{}).autoOffEvent=!0,(i.config||{}).autoComponentDestroy=!0,u.init(),c.init((i.config||{}).skeleton),a.cleanup(),s.cleanup(),this.isInitialized=!0,l.compile({el:this.el,data:this.data,context:this,onDone:function(){return s.emit({eventName:"loaded",attachedNode:o})}}),B.addEventListener("beforeunload",(function(){t.isDestroyed||(s.emit({eventName:"beforeDestroy",attachedNode:o}),t.destroy())}),{once:!0}),Y.run((function(e){if(t.isDestroyed)return e();o.isConnected||(s.emit({eventName:"beforeDestroy",attachedNode:o}),t.destroy(),e())})),z.head.querySelector('link[rel~="icon"]')||O("link",(function(e){e.rel="icon",e.type="image/png",e.href="https://afonsomatelias.github.io/assets/bouer/img/short.png"})).appendTo(z.head),this},e.prototype.set=function(e,t){return M(this,e,t)},e.prototype.toJsObj=function(e,t,n){return P(e,t,n)},e.prototype.watch=function(e,t,n){return J.app(this).resolve(Q).onPropertyChange(e,t,n||this.data)},e.prototype.react=function(e){return J.app(this).resolve(Q).onPropertyInScopeChange(e)},e.prototype.on=function(e,t,n){return J.app(this).resolve(Z).on({eventName:e,callback:t,attachedNode:(n||{}).attachedNode,modifiers:(n||{}).modifiers,context:this})},e.prototype.off=function(e,t,n){return J.app(this).resolve(Z).off({eventName:e,callback:t,attachedNode:n})},e.prototype.unbind=function(e,t,n){return J.app(this).resolve(Q).remove(e,n,t)},e.prototype.emit=function(e,t){var n=t||{};return J.app(this).resolve(Z).emit({eventName:e,attachedNode:n.element,init:n.init,once:n.once})},e.prototype.lazy=function(e,t){var n,r=this;t=d(t)?500:t;var o=arguments[2];return function(){var i=[].slice.call(arguments),a=o&&!n;clearTimeout(n),n=setTimeout((function(){n=null,o||e.apply(r,i)}),t),a&&e.apply(r,i)}},e.prototype.compile=function(e){return J.app(this).resolve(re).compile({el:e.el,data:e.data,context:e.context||this,onDone:e.onDone})},e.prototype.destroy=function(){var e=this.el,t=J.app(this).resolve(Z).$events,n=(t.destroyed||[]).concat(t["component:destroyed"]||[]);this.emit("destroyed",{element:this.el}),w(n,(function(e){return e.emit({once:!0})})),t.destroyed=[],t["component:destroyed"]=[],"BODY"==e.tagName?e.innerHTML="":z.contains(e)&&e.parentElement.removeChild(e),this.isDestroyed=!0,this.isInitialized=!1,J.app(this).clear()},e}();return ue}));